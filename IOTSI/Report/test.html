<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>CoRE Resource Directory</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Architecture and Use Cases"/>
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Use Case: Cellular M2M"/>
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Use Case: Home and Building Automation"/>
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Use Case: Link Catalogues"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Simple Directory Discovery"/>
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Finding a Directory Server"/>
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Third-party registration"/>
<link href="#rfc.section.5" rel="Chapter" title="5 Resource Directory Function Set"/>
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Discovery"/>
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Registration"/>
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Update"/>
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Removal"/>
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 Read Endpoint Links"/>
<link href="#rfc.section.5.6" rel="Chapter" title="5.6 Update Endpoint Links"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Group Function Set"/>
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Register a Group"/>
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Group Removal"/>
<link href="#rfc.section.7" rel="Chapter" title="7 RD Lookup Function Set"/>
<link href="#rfc.section.8" rel="Chapter" title="8 New Link-Format Attributes"/>
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Resource Instance attribute &#x2018;ins&#x2019;"/>
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Export attribute &#x2018;exp&#x2019;"/>
<link href="#rfc.section.9" rel="Chapter" title="9 DNS-SD Mapping"/>
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 DNS-based Service discovery"/>
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 mapping ins to &lt;Instance&gt;"/>
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 Mapping rt to &lt;ServiceType&gt;"/>
<link href="#rfc.section.9.4" rel="Chapter" title="9.4 Domain mapping"/>
<link href="#rfc.section.9.5" rel="Chapter" title="9.5 TXT Record key=value strings"/>
<link href="#rfc.section.9.6" rel="Chapter" title="9.6 Importing resource links into DNS-SD"/>
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations"/>
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Endpoint Identification and Authentication"/>
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 Access Control"/>
<link href="#rfc.section.10.3" rel="Chapter" title="10.3 Denial of Service Attacks"/>
<link href="#rfc.section.11" rel="Chapter" title="11 IANA Considerations"/>
<link href="#rfc.section.11.1" rel="Chapter" title="11.1 Resource Types"/>
<link href="#rfc.section.11.2" rel="Chapter" title="11.2 Link Extension"/>
<link href="#rfc.section.11.3" rel="Chapter" title="11.3 RD Parameter Registry"/>
<link href="#rfc.section.12" rel="Chapter" title="12 Examples"/>
<link href="#rfc.section.12.1" rel="Chapter" title="12.1 Lighting Installation"/>
<link href="#rfc.section.12.1.1" rel="Chapter" title="12.1.1 Installation Characteristics"/>
<link href="#rfc.section.12.1.2" rel="Chapter" title="12.1.2 RD entries"/>
<link href="#rfc.section.12.1.3" rel="Chapter" title="12.1.3 DNS entries"/>
<link href="#rfc.section.12.1.4" rel="Chapter" title="12.1.4 RD Operation"/>
<link href="#rfc.section.12.2" rel="Chapter" title="12.2 OMA Lightweight M2M (LWM2M) Example"/>
<link href="#rfc.section.12.2.1" rel="Chapter" title="12.2.1 The LWM2M Object Model"/>
<link href="#rfc.section.12.2.2" rel="Chapter" title="12.2.2 LWM2M Register Endpoint"/>
<link href="#rfc.section.12.2.3" rel="Chapter" title="12.2.3 Alternate Base URI"/>
<link href="#rfc.section.12.2.4" rel="Chapter" title="12.2.4 LWM2M Update Endpoint Registration"/>
<link href="#rfc.section.12.2.5" rel="Chapter" title="12.2.5 LWM2M De-Register Endpoint"/>
<link href="#rfc.section.13" rel="Chapter" title="13 Acknowledgments"/>
<link href="#rfc.section.14" rel="Chapter" title="14 Changelog"/>
<link href="#rfc.references" rel="Chapter" title="15 References"/>
<link href="#rfc.references.1" rel="Chapter" title="15.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="15.2 Informative References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.4.8 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Shelby, Z., Koster, M., Bormann, C., and P. van der Stok" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-core-resource-directory-07" />
  <meta name="dct.issued" scheme="ISO8601" content="2016-3-21" />
  <meta name="dct.abstract" content="In many M2M applications, direct discovery of resources is not practical due to sleeping nodes, disperse networks, or networks where multicast traffic is inefficient. These problems can be solved by employing an entity called a Resource Directory (RD), which hosts descriptions of resources held on other servers, allowing lookups to be performed for those resources. This document specifies the web interfaces that a Resource Directory supports in order for web servers to discover the RD and to register, maintain, lookup and remove resources descriptions. Furthermore, new link attributes useful in conjunction with an RD are defined." />
  <meta name="description" content="In many M2M applications, direct discovery of resources is not practical due to sleeping nodes, disperse networks, or networks where multicast traffic is inefficient. These problems can be solved by employing an entity called a Resource Directory (RD), which hosts descriptions of resources held on other servers, allowing lookups to be performed for those resources. This document specifies the web interfaces that a Resource Directory supports in order for web servers to discover the RD and to register, maintain, lookup and remove resources descriptions. Furthermore, new link attributes useful in conjunction with an RD are defined." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">CoRE</td>
  <td class="right">Z. Shelby</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">ARM</td>
</tr>
<tr>
  <td class="left">Intended status: Standards Track</td>
  <td class="right">M. Koster</td>
</tr>
<tr>
  <td class="left">Expires: September 22, 2016</td>
  <td class="right">SmartThings</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">C. Bormann</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">Universitaet Bremen TZI</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">P. van der Stok</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">consultant</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">March 21, 2016</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">CoRE Resource Directory<br />
  <span class="filename">draft-ietf-core-resource-directory-07</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>In many M2M applications, direct discovery of resources is not practical due to sleeping nodes, disperse networks, or networks where multicast traffic is inefficient. These problems can be solved by employing an entity called a Resource Directory (RD), which hosts descriptions of resources held on other servers, allowing lookups to be performed for those resources. This document specifies the web interfaces that a Resource Directory supports in order for web servers to discover the RD and to register, maintain, lookup and remove resources descriptions. Furthermore, new link attributes useful in conjunction with an RD are defined.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 22, 2016.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<li>2.   <a href="#rfc.section.2">Terminology</a></li>
<li>3.   <a href="#rfc.section.3">Architecture and Use Cases</a></li>
<li>3.1.   <a href="#rfc.section.3.1">Use Case: Cellular M2M</a></li>
<li>3.2.   <a href="#rfc.section.3.2">Use Case: Home and Building Automation</a></li>
<li>3.3.   <a href="#rfc.section.3.3">Use Case: Link Catalogues</a></li>
<li>4.   <a href="#rfc.section.4">Simple Directory Discovery</a></li>
<li>4.1.   <a href="#rfc.section.4.1">Finding a Directory Server</a></li>
<li>4.2.   <a href="#rfc.section.4.2">Third-party registration</a></li>
<li>5.   <a href="#rfc.section.5">Resource Directory Function Set</a></li>
<li>5.1.   <a href="#rfc.section.5.1">Discovery</a></li>
<li>5.2.   <a href="#rfc.section.5.2">Registration</a></li>
<li>5.3.   <a href="#rfc.section.5.3">Update</a></li>
<li>5.4.   <a href="#rfc.section.5.4">Removal</a></li>
<li>5.5.   <a href="#rfc.section.5.5">Read Endpoint Links</a></li>
<li>5.6.   <a href="#rfc.section.5.6">Update Endpoint Links</a></li>
<li>6.   <a href="#rfc.section.6">Group Function Set</a></li>
<li>6.1.   <a href="#rfc.section.6.1">Register a Group</a></li>
<li>6.2.   <a href="#rfc.section.6.2">Group Removal</a></li>
<li>7.   <a href="#rfc.section.7">RD Lookup Function Set</a></li>
<li>8.   <a href="#rfc.section.8">New Link-Format Attributes</a></li>
<li>8.1.   <a href="#rfc.section.8.1">Resource Instance attribute &#8216;ins&#8217;</a></li>
<li>8.2.   <a href="#rfc.section.8.2">Export attribute &#8216;exp&#8217;</a></li>
<li>9.   <a href="#rfc.section.9">DNS-SD Mapping</a></li>
<li>9.1.   <a href="#rfc.section.9.1">DNS-based Service discovery</a></li>
<li>9.2.   <a href="#rfc.section.9.2">mapping ins to &lt;Instance&gt;</a></li>
<li>9.3.   <a href="#rfc.section.9.3">Mapping rt to &lt;ServiceType&gt;</a></li>
<li>9.4.   <a href="#rfc.section.9.4">Domain mapping</a></li>
<li>9.5.   <a href="#rfc.section.9.5">TXT Record key=value strings</a></li>
<li>9.6.   <a href="#rfc.section.9.6">Importing resource links into DNS-SD</a></li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a></li>
<li>10.1.   <a href="#rfc.section.10.1">Endpoint Identification and Authentication</a></li>
<li>10.2.   <a href="#rfc.section.10.2">Access Control</a></li>
<li>10.3.   <a href="#rfc.section.10.3">Denial of Service Attacks</a></li>
<li>11.   <a href="#rfc.section.11">IANA Considerations</a></li>
<li>11.1.   <a href="#rfc.section.11.1">Resource Types</a></li>
<li>11.2.   <a href="#rfc.section.11.2">Link Extension</a></li>
<li>11.3.   <a href="#rfc.section.11.3">RD Parameter Registry</a></li>
<li>12.   <a href="#rfc.section.12">Examples</a></li>
<li>12.1.   <a href="#rfc.section.12.1">Lighting Installation</a></li>
<li>12.1.1.   <a href="#rfc.section.12.1.1">Installation Characteristics</a></li>
<li>12.1.2.   <a href="#rfc.section.12.1.2">RD entries</a></li>
<li>12.1.3.   <a href="#rfc.section.12.1.3">DNS entries</a></li>
<li>12.1.4.   <a href="#rfc.section.12.1.4">RD Operation</a></li>
<li>12.2.   <a href="#rfc.section.12.2">OMA Lightweight M2M (LWM2M) Example</a></li>
<li>12.2.1.   <a href="#rfc.section.12.2.1">The LWM2M Object Model</a></li>
<li>12.2.2.   <a href="#rfc.section.12.2.2">LWM2M Register Endpoint</a></li>
<li>12.2.3.   <a href="#rfc.section.12.2.3">Alternate Base URI</a></li>
<li>12.2.4.   <a href="#rfc.section.12.2.4">LWM2M Update Endpoint Registration</a></li>
<li>12.2.5.   <a href="#rfc.section.12.2.5">LWM2M De-Register Endpoint</a></li>
<li>13.   <a href="#rfc.section.13">Acknowledgments</a></li>
<li>14.   <a href="#rfc.section.14">Changelog</a></li>
<li>15.   <a href="#rfc.references">References</a></li>
<li>15.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>15.2.   <a href="#rfc.references.2">Informative References</a></li>
<li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a></h1>
<p id="rfc.section.1.p.1">The work on Constrained RESTful Environments (CoRE) aims at realizing the REST architecture in a suitable form for the most constrained nodes (e.g., 8-bit microcontrollers with limited RAM and ROM) and networks (e.g. 6LoWPAN).  CoRE is aimed at machine-to-machine (M2M) applications such as smart energy and building automation.</p>
<p id="rfc.section.1.p.2">The discovery of resources offered by a constrained server is very important in machine-to-machine applications where there are no humans in the loop and static interfaces result in fragility. The discovery of resources provided by an HTTP Web Server is typically called Web Linking <a href="#RFC5988">[RFC5988]</a>. The use of Web Linking for the description and discovery of resources hosted by constrained web servers is specified by the CoRE Link Format <a href="#RFC6690">[RFC6690]</a>. However, <a href="#RFC6690">[RFC6690]</a> only describes how to discover resources from the web server that hosts them by requesting <samp>/.well-known/core</samp>. In many M2M scenarios, direct discovery of resources is not practical due to sleeping nodes, disperse networks, or networks where multicast traffic is inefficient. These problems can be solved by employing an entity called a Resource Directory (RD), which hosts descriptions of resources held on other servers, allowing lookups to be performed for those resources.</p>
<p id="rfc.section.1.p.3">This document specifies the web interfaces that a Resource Directory supports in order for web servers to discover the RD and to register, maintain, lookup and remove resource descriptions. Furthermore, new link attributes useful in conjunction with a Resource Directory are defined. Although the examples in this document show the use of these interfaces with CoAP <a href="#RFC7252">[RFC7252]</a>, they can be applied in an equivalent manner to HTTP <a href="#RFC7230">[RFC7230]</a>.</p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#terminology" id="terminology">Terminology</a></h1>
<p id="rfc.section.2.p.1">The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;NOT RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>. The term &#8220;byte&#8221; is used in its now customary sense as a synonym for &#8220;octet&#8221;.</p>
<p id="rfc.section.2.p.2">This specification requires readers to be familiar with all the terms and concepts that are discussed in <a href="#RFC5988">[RFC5988]</a> and <a href="#RFC6690">[RFC6690]</a>. Readers should also be familiar with the terms and concepts discussed in <a href="#RFC7252">[RFC7252]</a>.  To describe the REST interfaces defined in this specification, the URI Template format is used <a href="#RFC6570">[RFC6570]</a>.</p>
<p id="rfc.section.2.p.3">This specification makes use of the following additional terminology:</p>
<p/>

<dl>
  <dt>Resource Directory</dt>
  <dd style="margin-left: 8"><br/> A web entity that stores information about web resources and implements the REST interfaces defined in this specification for registration and lookup of those resources.</dd>
  <dt>Domain</dt>
  <dd style="margin-left: 8"><br/> In the context of a Resource Directory, a domain is a logical grouping of endpoints. This specification assumes that the list of Domains supported by an RD is pre-configured by that RD. When a domain is exported to DNS, the domain value equates to the DNS domain name.</dd>
  <dt>Group</dt>
  <dd style="margin-left: 8"><br/> In the context of a Resource Directory, a group is a logical grouping of endpoints for the purpose of group communications. All groups within a domain are unique.</dd>
  <dt>Endpoint</dt>
  <dd style="margin-left: 8"><br/> Endpoint (EP) is a term used to describe a web server or client in <a href="#RFC7252">[RFC7252]</a>. In the context of this specification an endpoint is used to describe a web server that registers resources to the Resource Directory. An endpoint is identified by its endpoint name, which is included during registration, and is unique within the associated domain of the registration.</dd>
</dl>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#arch" id="arch">Architecture and Use Cases</a></h1>
<p id="rfc.section.3.p.1">The resource directory architecture is illustrated in <a href="#fig-arch">Figure 1</a>. A Resource Directory (RD) is used as a repository for Web Links <a href="#RFC5988">[RFC5988]</a> about resources hosted on other web servers, which are called endpoints (EP).  An endpoint is a web server associated with a scheme, IP address and port (called Context), thus a physical node may host one or more endpoints. The RD implements a set of REST interfaces for endpoints to register and maintain sets of Web Links (called resource directory entries), and for clients to lookup resources from the RD or maintain groups. Endpoints themselves can also act as clients. An RD can be logically segmented by the use of Domains.  The domain an endpoint is associated with can be defined by the RD or configured by an outside entity. This information hierarchy is shown in <a href="#fig-hierarchy">Figure 2</a>.</p>
<p id="rfc.section.3.p.2">Endpoints are assumed to proactively register and maintain resource directory entries on the RD, which are soft state and need to be periodically refreshed.  An endpoint is provided with interfaces to register, update and remove a resource directory entry. Furthermore, a mechanism to discover an RD using the CoRE Link Format is defined. It is also possible for an RD to proactively discover Web Links from endpoints and add them as resource directory entries.  A lookup interface for discovering any of the Web Links held in the RD is provided using the CoRE Link Format.</p>
<div id="rfc.figure.1"/>
<div id="fig-arch"/>
<pre>
             Registration     Lookup, Group
              Interface        Interfaces
  +----+          |                 |
  | EP |----      |                 |
  +----+    ----  |                 |
                --|-    +------+    |
  +----+          | ----|      |    |     +--------+
  | EP | ---------|-----|  RD  |----|-----| Client |
  +----+          | ----|      |    |     +--------+
                --|-    +------+    |
  +----+    ----  |                 |
  | EP |----      |                 |
  +----+

</pre>
<p class="figure">Figure 1: The resource directory architecture.</p>
<div id="rfc.figure.2"/>
<div id="fig-hierarchy"/>
<pre>
               +------------+
               |   Domain   | &lt;-- Name
               +------------+
                    |     |
                    |   +------------+
                    |   |   Group    | &lt;-- Name, IP
                    |   +------------+
                    |     |
               +------------+
               |  Endpoint  |  &lt;-- Name, Scheme, IP, Port
               +------------+
                     |
                     |
               +------------+
               |  Resource  |  &lt;-- Target, Parameters
               +------------+

</pre>
<p class="figure">Figure 2: The resource directory information hierarchy.</p>
<h1 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#cellular" id="cellular">Use Case: Cellular M2M</a></h1>
<p id="rfc.section.3.1.p.1">Over the last few years, mobile operators around the world have focused on development of M2M solutions in order to expand the business to the new type of users: machines. The machines are connected directly to a mobile network using an appropriate embedded air interface (GSM/GPRS, WCDMA, LTE) or via a gateway providing short and wide range wireless interfaces. From the system design point of view, the ambition is to design horizontal solutions that can enable utilization of machines in different applications depending on their current availability and capabilities as well as application requirements, thus avoiding silo like solutions. One of the crucial enablers of such design is the ability to discover resources (machines &#8212; endpoints) capable of providing required information at a given time or acting on instructions from the end users.</p>
<p id="rfc.section.3.1.p.2">In a typical scenario, during a boot-up procedure (and periodically afterwards), the machines (endpoints) register with a Resource Directory (for example EPs installed on vehicles enabling tracking of their position for fleet management purposes and monitoring environment parameters) hosted by the mobile operator or somewhere else in the network, periodically a description of its own capabilities.  Due to the usual network configuration of mobile networks, the EPs attached to the mobile network may not always be efficiently reachable. Therefore, a remote server is usually used to provide proxy access to the EPs. The address of each (proxy) endpoint on this server is included in the resource description stored in the RD. The users, for example mobile applications for environment monitoring, contact the RD, look-up the endpoints capable of providing information about the environment using appropriate set of link parameters, obtain information on how to contact them (URLs of the proxy server) and then initiate interaction to obtain information that is finally processed, displayed on the screen and usually stored in a database. Similarly, fleet management systems provide the appropriate link parameters to the RD to look-up for EPs deployed on the vehicles the application is responsible for.</p>
<h1 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a> <a href="#automation" id="automation">Use Case: Home and Building Automation</a></h1>
<p id="rfc.section.3.2.p.1">Home and commercial building automation systems can benefit from the use of M2M web services.  The discovery requirements of these applications are demanding. Home automation usually relies on run-time discovery to commission the system, whereas in building automation a combination of professional commissioning and run-time discovery is used. Both home and building automation involve peer-to-peer interactions between endpoints, and involve battery-powered sleeping devices.</p>
<p id="rfc.section.3.2.p.2">The exporting of resource information to other discovery systems is also important in these automation applications. In home automation there is a need to interact with other consumer electronics, which may already support DNS-SD, and in building automation larger resource directories or DNS-SD covering multiple buildings.</p>
<h1 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a> <a href="#usecase-catalogues" id="usecase-catalogues">Use Case: Link Catalogues</a></h1>
<p id="rfc.section.3.3.p.1">Resources may be shared through data brokers that have no knowledge beforehand of who is going to consume the data. Resource Directory can be used to hold links about resources and services hosted anywhere to make them discoverable by a general class of applications.</p>
<p id="rfc.section.3.3.p.2">For example, environmental and weather sensors that generate data for public consumption may provide the data to an intermediary server, or broker. Sensor data are published to the intermediary upon changes or at regular intervals.  Descriptions of the sensors that resolve to links to sensor data may be published to a Resource Directory. Applications wishing to consume the data can use the Resource Directory lookup function set to discover and resolve links to the desired resources and endpoints. The Resource Directory service need not be coupled with the data intermediary service. Mapping of Resource Directories to data intermediaries may be many-to-many.</p>
<p id="rfc.section.3.3.p.3">Metadata in web link compatible representations are supplied by Resource Directories, which may be internally stored as  triples, or relation/attribute pairs providing metadata about resource links. External catalogs that are represented in other formats may be converted to common web linking formats for storage and access by Resource Directories. Since it is common practice for these to be URN encoded, simple and lossless structural transforms should generally be sufficient to store external metadata in Resource Directories.</p>
<p id="rfc.section.3.3.p.4">The additional features of Resource Directory allow domains to be defined to enable access to a particular set of resources from particular applications.  This provides isolation and protection of sensitive data when needed. Resource groups may defined to allow batched reads from multiple resources.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#simple" id="simple">Simple Directory Discovery</a></h1>
<p id="rfc.section.4.p.1">Not all endpoints hosting resources are expected to know how to implement the Resource Directory Function Set (see <a href="#rd">Section 5</a>) and thus explicitly register with a Resource Directory (or other such directory server). Instead, simple endpoints can implement the generic Simple Directory Discovery approach described in this section. An RD implementing this specification MUST implement Simple Directory Discovery. However, there may be security reasons why this form of directory discovery would be disabled.</p>
<p id="rfc.section.4.p.2">This approach requires that the endpoint makes available the hosted resources that it wants to be discovered, as links on its <samp>/.well-known/core</samp> interface as specified in <a href="#RFC6690">[RFC6690]</a>.</p>
<p id="rfc.section.4.p.3">The endpoint then finds one or more IP addresses of the directory server it wants to know about its resources as described in <a href="#simple_finding">Section 4.1</a>.</p>
<p id="rfc.section.4.p.4">An endpoint that wants to make itself discoverable occasionally sends a POST request to the <samp>/.well-known/core</samp> URI of any candidate directory server that it finds. The body of the POST request is either</p>
<p/>

<ul>
  <li>empty, in which case the directory server is encouraged by this POST request to perform GET requests at the requesting server&#8217;s default discovery URI.</li>
</ul>
<p id="rfc.section.4.p.6">or</p>
<p/>

<ul>
  <li>a non-empty link-format document, which indicates the specific services that the requesting server wants to make known to the directory server.</li>
</ul>
<p id="rfc.section.4.p.8">The directory server integrates the information it received this way into its resource directory.  It MAY make the information available to further directories, if it can ensure that a loop does not form.  The protocol used between directories to ensure loop-free operation is outside the scope of this document.</p>
<p id="rfc.section.4.p.9">The following example shows an endpoint using simple resource discovery, by simply sending a POST with its links in the body to a directory.</p>
<pre>
     EP                                               RD
     |                                                 |
     | -- POST /.well-known/core "&lt;/sen/temp&gt;..." ---&gt; |
     |                                                 |
     |                                                 |
     | &lt;---- 2.01 Created   -------------------------  |
     |                                                 |
</pre>
<h1 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a> <a href="#simple_finding" id="simple_finding">Finding a Directory Server</a></h1>
<p id="rfc.section.4.1.p.1">Endpoints that want to contact a directory server can obtain candidate IP addresses for such servers in a number of ways.</p>
<p id="rfc.section.4.1.p.2">In a 6LoWPAN, good candidates can be taken from:</p>
<p/>

<ul>
  <li>specific static configuration (e.g., anycast addresses), if any,</li>
  <li>the ABRO option of 6LoWPAN-ND <a href="#RFC6775">[RFC6775]</a>,</li>
  <li>other ND options that happen to point to servers (such as RDNSS),</li>
  <li>DHCPv6 options that might be defined later.</li>
</ul>
<p id="rfc.section.4.1.p.4">In networks with more inexpensive use of multicast, the candidate IP address may be a well-known multicast address, i.e. directory servers are found by simply sending GET requests to that well-known multicast address (see <a href="#discovery">Section 5.1</a>).</p>
<p id="rfc.section.4.1.p.5">As some of these sources are just (more or less educated) guesses, endpoints MUST make use of any error messages to very strictly rate-limit requests to candidate IP addresses that don&#8217;t work out.  For example, an ICMP Destination Unreachable message (and, in particular, the port unreachable code for this message) may indicate the lack of a CoAP server on the candidate host, or a CoAP error response code such as 4.05 &#8220;Method Not Allowed&#8221; may indicate unwillingness of a CoAP server to act as a directory server.</p>
<h1 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a> <a href="#third-party-registration" id="third-party-registration">Third-party registration</a></h1>
<p id="rfc.section.4.2.p.1">For some applications, even Simple Directory Discovery may be too taxing for certain very constrained devices, in particular if the security requirements become too onerous.</p>
<p id="rfc.section.4.2.p.2">In a controlled environment (e.g. building control), the Resource Directory can be filled by a third device, called an installation tool. The installation tool can fill the Resource Directory from a database or other means. For that purpose the scheme, IP address and port of the registered device is indicated in the Context parameter of the registration as well.</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#rd" id="rd">Resource Directory Function Set</a></h1>
<p id="rfc.section.5.p.1">This section defines the REST interfaces between an RD and endpoints, which is called the Resource Directory Function Set. Although the examples throughout this section assume the use of CoAP <a href="#RFC7252">[RFC7252]</a>, these REST interfaces can also be realized using HTTP <a href="#RFC7230">[RFC7230]</a>. In all definitions in this section, both CoAP response codes (with dot notation) and HTTP response codes (without dot notation) are shown. An RD implementing this specification MUST support the discovery, registration, update, lookup, and removal interfaces defined in this section.</p>
<p id="rfc.section.5.p.2">Resource directory entries are designed to be easily exported to other discovery mechanisms such as DNS-SD. For that reason, parameters that would meaningfully be mapped to DNS SHOULD be limited to a maximum length of 63 bytes.</p>
<h1 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a> <a href="#discovery" id="discovery">Discovery</a></h1>
<p id="rfc.section.5.1.p.1">Before an endpoint can make use of an RD, it must first know the RD&#8217;s IP address, port and the path of its RD Function Set. There can be several mechanisms for discovering the RD including assuming a default location (e.g. on an Edge Router in a LoWPAN), by assigning an anycast address to the RD, using DHCP, or by discovering the RD using the CoRE Link Format (see also <a href="#simple_finding">Section 4.1</a>). This section defines discovery of the RD using the well-known interface of the CoRE Link Format <a href="#RFC6690">[RFC6690]</a> as the required mechanism. It is however expected that RDs will also be discoverable via other methods depending on the deployment.</p>
<p id="rfc.section.5.1.p.2">Discovery is performed by sending either a multicast or unicast GET request to <samp>/.well-known/core</samp> and including a Resource Type (rt) parameter <a href="#RFC6690">[RFC6690]</a> with the value &#8220;core.rd&#8221; in the query string. Likewise, a Resource Type parameter value of &#8220;core.rd-lookup&#8221; is used to discover the RD Lookup Function Set.  Upon success, the response will contain a payload with a link format entry for each RD discovered, with the URL indicating the root resource of the RD. When performing multicast discovery, the multicast IP address used will depend on the scope required and the multicast capabilities of the network.</p>
<p id="rfc.section.5.1.p.3">A Resource Directory MAY provide hints about the content-formats it supports in the links it exposes or registers, using the &#8220;ct&#8221; link attribute, as shown in the example below. Clients MAY use these hints to select alternate content-formats for interaction with the Resource Directory.</p>
<p id="rfc.section.5.1.p.4">HTTP does not support multicast and consequently only unicast discovery can be supported using HTTP. Links to Resource Directories MAY be registered in other Resource Directories, and well-known entry points SHOULD be provided to enable the bootstrapping of unicast discovery.</p>
<p id="rfc.section.5.1.p.5">An RD implementation of this specification MUST support query filtering for the rt parameter as defined in <a href="#RFC6690">[RFC6690]</a>.</p>
<p id="rfc.section.5.1.p.6">The discovery request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">GET</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/.well-known/core{?rt}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>rt :=</dt>
      <dd style="margin-left: 8">Resource Type (optional). MAY contain one or more of the values &#8220;core.rd&#8221;, &#8220;core.rd-lookup&#8221;, &#8220;core.rd-group&#8221; or &#8220;core.rd*&#8221;</dd>
    </dl>
    <p> </p>
  </dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format (if any)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+json (if any)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+cbor (if any)</dd>
</dl>
<p id="rfc.section.5.1.p.8">The following response codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.05 &#8220;Content&#8221; with an application/link-format, application/link-format+json, or application/link-format+cbor payload containing one or more matching entries for the RD resource.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; is returned in case no matching entry is found for a unicast request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; is returned in case of a malformed request for a unicast request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">No error response to a multicast request.</dd>
  <dt>HTTP support :</dt>
  <dd style="margin-left: 8">NO</dd>
</dl>
<p id="rfc.section.5.1.p.10">The following example shows an endpoint discovering an RD using this interface, thus learning that the base RD resource is, in this example, at /rd.  Note that it is up to the RD to choose its base RD resource, although diagnostics and debugging is facilitated by using the base paths specified here where possible.</p>
<pre>
     EP                                               RD
     |                                                 |
     | ----- GET /.well-known/core?rt=core.rd* ------&gt; |
     |                                                 |
     |                                                 |
     | &lt;---- 2.05 Content "&lt;/rd&gt;;rt="core.rd"  ------- |
     |                                                 |


</pre>
<pre>
Req: GET coap://[ff02::1]/.well-known/core?rt=core.rd*

Res: 2.05 Content
&lt;/rd&gt;;rt="core.rd";ct="application/link-format+cbor",
&lt;/rd-lookup&gt;;rt="core.rd-lookup";ct="application/link-format+cbor",
&lt;/rd-group&gt;;rt="core.rd-group";ct="application/link-format+cbor"
</pre>
<h1 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a> <a href="#registration" id="registration">Registration</a></h1>
<p id="rfc.section.5.2.p.1">After discovering the location of an RD Function Set, an endpoint MAY register its resources using the registration interface. This interface accepts a POST from an endpoint containing the list of resources to be added to the directory as the message payload in the CoRE Link Format <a href="#RFC6690">[RFC6690]</a>, JSON CoRE Link Format (application/link-format+json), or CBOR CoRE Link Format (application/link-format+cbor)  <a href="#I-D.ietf-core-links-json">[I-D.ietf-core-links-json]</a>, along with query string parameters indicating the name of the endpoint, its domain and the lifetime of the registration. All parameters except the endpoint name are optional. It is expected that other specifications will define further parameters (see <a href="#iana-registry">Section 11.3</a>). The RD then creates a new resource or updates an existing resource in the RD and returns its location. An endpoint MUST use that location when refreshing registrations using this interface. Endpoint resources in the RD are kept active for the period indicated by the lifetime parameter. The endpoint is responsible for refreshing the entry within this period using either the registration or update interface. The registration interface MUST be implemented to be idempotent, so that registering twice with the same endpoint parameter does not create multiple RD entries.</p>
<p id="rfc.section.5.2.p.2">The registration request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">POST</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+rd}{?ep,d,et,lt,con}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>rd :=</dt>
      <dd style="margin-left: 8">RD Function Set path (mandatory). This is the path of the RD Function Set, as obtained from discovery. An RD SHOULD use the value &#8220;rd&#8221; for this variable whenever possible.</dd>
      <dt>ep :=</dt>
      <dd style="margin-left: 8">Endpoint name (mandatory). The endpoint name is an identifier that MUST be unique within a domain.  The maximum length of this parameter is 63 bytes.</dd>
      <dt>d :=</dt>
      <dd style="margin-left: 8">Domain (optional). The domain to which this endpoint belongs. This parameter SHOULD be less than 63 bytes. Optional. When this parameter is elided, the RD MAY associate the endpoint with a configured default domain. The domain value is needed to export the endpoint to DNS-SD (see <a href="#dns-sd">Section 9</a>).</dd>
      <dt>et :=</dt>
      <dd style="margin-left: 8">Endpoint Type (optional). The semantic type of the endpoint. This parameter SHOULD be less than 63 bytes. Optional.</dd>
      <dt>lt :=</dt>
      <dd style="margin-left: 8">Lifetime (optional). Lifetime of the registration in seconds. Range of 60-4294967295.  If no lifetime is included, a default value of 86400 (24 hours) SHOULD be assumed.</dd>
      <dt>con :=</dt>
      <dd style="margin-left: 8">Context (optional). This parameter sets the scheme, address and port at which this server is available in the form scheme://host:port. Optional. In the absence of this parameter the scheme of the protocol, source IP address and source port of the register request are assumed. This parameter is mandatory when the directory is filled by a third party such as an installation tool.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+json</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+cbor</dd>
</dl>
<p id="rfc.section.5.2.p.4">The following response codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.01 &#8220;Created&#8221; or 201 &#8220;Created&#8221;. The Location header MUST be included with the new resource entry for the endpoint. This Location MUST be a stable identifier generated by the RD as it is used for all subsequent operations on this registration. The resource returned in the Location is for the purpose of updating the lifetime of the registration and for mainting the content of the registered links, incluidng updating and deleting links.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
  <dt>HTTP support:</dt>
  <dd style="margin-left: 8">YES</dd>
</dl>
<p id="rfc.section.5.2.p.6">The following example shows an endpoint with the name &#8220;node1&#8221; registering two resources to an RD using this interface. The resulting location /rd/4521 is just an example of an RD generated location.</p>
<pre>
    EP                                                RD
     |                                                 |
     | --- POST /rd?ep=node1 "&lt;/sensors..." -------&gt;   |
     |                                                 |
     |                                                 |
     | &lt;-- 2.01 Created Location: /rd/4521 ----------  |
     |                                                 |
</pre>
<pre>
Req: POST coap://rd.example.com/rd?ep=node1
Content-Format: 40
Payload:
&lt;/sensors/temp&gt;;ct=41;rt="temperature-c";if="sensor",
&lt;/sensors/light&gt;;ct=41;rt="light-lux";if="sensor"

Res: 2.01 Created
Location: /rd/4521
</pre>
<pre>
Req: POST /rd?ep=node1 HTTP/1.1
Host : example.com
Content-Format: application/link-format
Payload:
&lt;/sensors/temp&gt;;ct=41;rt="temperature-c";if="sensor",
&lt;/sensors/light&gt;;ct=41;rt="light-lux";if="sensor"

Res: 201 Created
Location: /rd/4521
</pre>
<h1 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3.</a> <a href="#update" id="update">Update</a></h1>
<p id="rfc.section.5.3.p.1">The update interface is used by an endpoint to refresh or update its registration with an RD. To use the interface, the endpoint sends a POST request to the resource returned in the Location option in the response to the first registration.  An update MAY update the lifetime or context parameters if they have changed since the last registration or update. Parameters that have not changed SHOULD NOT be included in an update. Upon receiving an update request, the RD resets the timeout for that endpoint and updates the scheme, IP address and port of the endpoint (using the source address of the update, or the context parameter if present).</p>
<p id="rfc.section.5.3.p.2">An update MAY optionally add or replace links for the endpoint by including those links in the payload of the update as a CoRE Link Format document. Including links in an update message greatly increases the load on an RD and SHOULD be done infrequently. A link is replaced only if both the target URI and relation type match (see <a href="#endpoint_identification">Section 10.1</a>)</p>
<p id="rfc.section.5.3.p.3">The update request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">POST</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+location}{?lt,con}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>location :=</dt>
      <dd style="margin-left: 8">This is the Location path returned by the RD as a result of a successful earlier registration.</dd>
      <dt>lt :=</dt>
      <dd style="margin-left: 8">Lifetime (optional). Lifetime of the registration in seconds. Range of 60-4294967295.  If no lifetime is included, a default value of 86400 (24 hours) SHOULD be assumed.</dd>
      <dt>con :=</dt>
      <dd style="margin-left: 8">Context (optional). This parameter sets the scheme, address and port at which this server is available in the form scheme://host:port. Optional. In the absence of this parameter the scheme of the protocol, source IP address and source port used to register are assumed. This parameter is compulsory when the directory is filled by a third party such as an installation tool.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format (optional)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+json (optional)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+cbor (optional)</dd>
</dl>
<p id="rfc.section.5.3.p.5">The following response codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.04 &#8220;Changed&#8221; or 204 &#8220;No Content&#8221; if the update was successfully processed.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221;. Registration does not exist (e.g. may have expired).</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
  <dt>HTTP support:</dt>
  <dd style="margin-left: 8">YES</dd>
</dl>
<p id="rfc.section.5.3.p.7">The following example shows an endpoint updating its registration at an RD using this interface.</p>
<pre>
     EP                                                RD
     |                                                 |
     | --- POST /rd/4521  --------------------------&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.04 Changed  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: POST /rd/4521

Res: 2.04 Changed
</pre>
<h1 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4.</a> <a href="#removal" id="removal">Removal</a></h1>
<p id="rfc.section.5.4.p.1">Although RD entries have soft state and will eventually timeout after their lifetime, an endpoint SHOULD explicitly remove its entry from the RD if it knows it will no longer be available (for example on shut-down). This is accomplished using a removal interface on the RD by performing a DELETE on the endpoint resource.</p>
<p id="rfc.section.5.4.p.2">The removal request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">DELETE</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+location}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>location :=</dt>
      <dd style="margin-left: 8">This is the Location path returned by the RD as a result of a successful earlier registration.</dd>
    </dl>
    <p> </p>
  </dd>
</dl>
<p id="rfc.section.5.4.p.4">The following responses codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.02 &#8220;Deleted&#8221; or 204 &#8220;No Content&#8221; upon successful deletion</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221;. Registration does not exist (e.g. may have expired).</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
</dl>
<p id="rfc.section.5.4.p.6">HTTP support: YES</p>
<p id="rfc.section.5.4.p.7">The following examples shows successful removal of the endpoint from the RD.</p>
<pre>
    EP                                                RD
     |                                                 |
     | --- DELETE /rd/4521  ------------------------&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.02 Deleted  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: DELETE /rd/4521

Res: 2.02 Deleted
</pre>
<h1 id="rfc.section.5.5"><a href="#rfc.section.5.5">5.5.</a> <a href="#read" id="read">Read Endpoint Links</a></h1>
<p id="rfc.section.5.5.p.1">Some endpoints may wish to manage their links as a collection, and may need to read the current set of links in order to determine link maintenance operations.</p>
<p id="rfc.section.5.5.p.2">One or more links MAY be selected by using query filtering as specified in <a href="#RFC6690">[RFC6690]</a> Section 4.1</p>
<p id="rfc.section.5.5.p.3">The read request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">GET</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+location}{?href,rel,rt,if,ct}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>location :=</dt>
      <dd style="margin-left: 8">This is the Location path returned by the RD as a result of a successful earlier registration.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt></dt>
  <dd style="margin-left: 8">href,rel,rt,if,ct := link relations and attributes specified in the query in order to select particular links based on their relations and attributes. &#8220;href&#8221; denotes the URI target of the link. See <a href="#RFC6690">[RFC6690]</a> Sec. 4.1</dd>
</dl>
<p id="rfc.section.5.5.p.5">The following responses codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.05 &#8220;Content&#8221; or 200 &#8220;OK&#8221; upon success with an <samp>application/link-format</samp>, <samp>application/link-format+cbor</samp>, or <samp>application/link-format+json</samp> payload.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221;. Registration does not exist (e.g. may have expired).</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
</dl>
<p id="rfc.section.5.5.p.7">HTTP support: YES</p>
<p id="rfc.section.5.5.p.8">The following examples show successful read of the endpoint links from the RD.</p>
<pre>
    EP                                                RD
     |                                                 |
     | --- GET /rd/4521  ------------------------&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.05 Content &lt;/sensors... ----------------  |
     |                                                 |
</pre>
<pre>
Req: GET /rd/4521

Res: 2.01 Content
Payload:
&lt;/sensors/temp&gt;;ct=41;rt="temperature-c";if="sensor",
&lt;/sensors/light&gt;;ct=41;rt="light-lux";if="sensor"
</pre>
<h1 id="rfc.section.5.6"><a href="#rfc.section.5.6">5.6.</a> <a href="#link-up" id="link-up">Update Endpoint Links</a></h1>
<p id="rfc.section.5.6.p.1">[This section will be removed before or as a result of a working-group last-call if the PATCH methods do not achieve the same level of consensus as the present document.]</p>
<p id="rfc.section.5.6.p.2">A PATCH update adds, removes or changes links for the endpoint by including link update information in the payload of the update as a merge-patch+json format <a href="#RFC7396">[RFC7396]</a> document.</p>
<p id="rfc.section.5.6.p.3">One or more links are selected for update by using query filtering as specified in <a href="#RFC6690">[RFC6690]</a> Section 4.1</p>
<p id="rfc.section.5.6.p.4">The query filter selects the links to be modified or deleted, by matching the query parameter values to the values of the link attributes.</p>
<p id="rfc.section.5.6.p.5">When the query parameters are not present in the request, the payload specifies links to be added to the target document. When the query parameters are present, the attribute names and values in the query parameters select one or more links on which to apply the PATCH operation.</p>
<p id="rfc.section.5.6.p.6">If an attribute name specified in the PATCH document exists in any the set of selected links, all occurrences of the attribute value in the target document MUST be updated using the value from the PATCH payload. If the attribute name is not present in any selected links, the attribute MUST be added to the links.</p>
<p id="rfc.section.5.6.p.7">The update request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">EP -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">PATCH</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+location}{?href,rel,rt,if,ct}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>location :=</dt>
      <dd style="margin-left: 8">This is the Location path returned by the RD as a result of a successful earlier registration.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt></dt>
  <dd style="margin-left: 8">href,rel,rt,if,ct := link relations and attributes specified in the query in order to select particular links based on their relations and attributes. &#8220;href&#8221; denotes the URI target of the link. See <a href="#RFC6690">[RFC6690]</a> Sec. 4.1</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/merge-patch+json (mandatory)</dd>
</dl>
<p id="rfc.section.5.6.p.9">The following response codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.04 &#8220;Changed&#8221; 0r 204 &#8220;No Content&#8221; in the update was successfully processed.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221;. Registration resource does not exist (e.g. may have expired).</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
</dl>
<p id="rfc.section.5.6.p.11">HTTP support: YES</p>
<p id="rfc.section.5.6.p.12">The following examples show an endpoint adding &lt;/sensors/humid&gt;, modifying &lt;/sensors/temp&gt;, and removing &lt;/sensors/light&gt; links in RD using the Update Endpoint Links function.</p>
<p id="rfc.section.5.6.p.13">The following example shows an EP adding the link &lt;/sensors/humid&gt;;ct=41;rt=&#8221;humidity-s&#8221;;if=&#8221;sensor&#8221; to the collection of links at the location /rd/4521.</p>
<pre>
     EP                                                RD
     |                                                 |
     | --- PATCH /rd/4521---------------------------&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.04 Changed  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: PATCH /rd/4521

Payload: 
[{"href":"/sensors/humid","ct": 41, "rt": "humidity-s", "if": "sensor"}]

Content-Format:
application/merge-patch+json

Res: 2.04 Changed
</pre>
<p id="rfc.section.5.6.p.14">The following example shows an EP modifying all links at the location /rd/4521 which are  identified by href=&#8221;/sensors/temp&#8221;, from the initial link-value of &lt;/sensors/temp&gt;;rt=&#8221;temperature&#8221; to the new link-value &lt;/sensors/temp&gt;;rt=&#8221;temperature-c&#8221;;if=&#8221;sensor&#8221; by changing the value of the link attribute &#8220;rt&#8221; and adding the link attribute if=&#8221;sensor&#8221; using the PATCH operation with the supplied merge-patch+json document payload.</p>
<pre>
     EP                                                RD
     |                                                 |
     | --- PATCH /rd/4521?href="/sensors/temp"  ----&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.04 Changed  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: PATCH /rd/4521?href="/sensors/temp"

Payload: 
{"rt": "temperature-c", "if": "sensor"},

Content-Format:
application/merge-patch+json

Res: 2.04 Changed
</pre>
<p id="rfc.section.5.6.p.15">This example shows an EP removing all links at the location /rd/4521 which are identified by href=&#8221;/sensors/light&#8221;.</p>
<pre>
     EP                                                RD
     |                                                 |
     | --- PATCH /rd/4521?href="/sensors/light"  ----&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.04 Changed  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: PATCH /rd/4521?href="/sensors/light"

Payload: 
{null}

Content-Format:
application/merge-patch+json

Res: 2.04 Changed
</pre>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#group" id="group">Group Function Set</a></h1>
<p id="rfc.section.6.p.1">This section defines a function set for the creation of groups of endpoints for the purpose of managing and looking up endpoints for group operations.  The group function set is similar to the resource directory function set, in that a group may be created or removed. However unlike an endpoint entry, a group entry consists of a list of endpoints and does not have a lifetime associated with it. In order to make use of multicast requests with CoAP, a group MAY have a multicast address associated with it.</p>
<h1 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a> <a href="#group-register" id="group-register">Register a Group</a></h1>
<p id="rfc.section.6.1.p.1">In order to create a group, a management entity used to configure groups, makes a request to the RD indicating the name of the group to create (or update), optionally the domain the group belongs to, and optionally the multicast address of the group. The registration message includes the list of endpoints that belong to that group. If an endpoint has already registered with the RD, the RD attempts to use the context of the endpoint from its RD endpoint entry. If the client registering the group knows the endpoint has already registered, then it MAY send a blank target URI for that endpoint link when registering the group. Configuration of the endpoints themselves is out of scope of this specification. Such an interface for managing the group membership of an endpoint has been defined in <a href="#RFC7390">[RFC7390]</a>.</p>
<p id="rfc.section.6.1.p.2">The registration request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">Manager -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">POST</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+rd-group}{?gp,d,con}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>rd-group :=</dt>
      <dd style="margin-left: 8">RD Group Function Set path (mandatory). This is the path of the RD Group Function Set. An RD SHOULD use the value &#8220;rd-group&#8221; for this variable whenever possible.</dd>
      <dt>gp :=</dt>
      <dd style="margin-left: 8">Group Name (mandatory). The name of the group to be created or replaced, unique within that domain. The maximum length of this parameter is 63 bytes.</dd>
      <dt>d :=</dt>
      <dd style="margin-left: 8">Domain (optional). The domain to which this group belongs. The maximum length of this parameter is 63 bytes. Optional. When this parameter is elided, the RD MAY associate the endpoint with a configured default domain. The domain value is needed to export the endpoint to DNS-SD (see <a href="#dns-sd">Section 9</a>)</dd>
      <dt>con :=</dt>
      <dd style="margin-left: 8">Context (optional). This parameter is used to set the IP multicast address at which this server is available in the form scheme://multicast-address:port.  Optional. In the absence of this parameter no multicast address is configured.  This parameter is compulsory when the directory is filled by an installation tool.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+json</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+cbor</dd>
</dl>
<p id="rfc.section.6.1.p.4">The following response codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.01 &#8220;Created&#8221; or 201 &#8220;Created&#8221;. The Location header MUST be included with the new group entry.  This Location MUST be a stable identifier generated by the RD as it is used for delete operations on this registration.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
  <dt>HTTP support:</dt>
  <dd style="margin-left: 8">YES</dd>
</dl>
<p id="rfc.section.6.1.p.6">The following example shows an EP registering a group with the name &#8220;lights&#8221; which has two endpoints to an RD using this interface. The resulting location /rd-group/12 is just an example of an RD generated group location.</p>
<pre>
    EP                                                RD
     |                                                 |
     | - POST /rd-group?gp=lights "&lt;&gt;;ep=node1..." --&gt; |
     |                                                 |
     |                                                 |
     | &lt;---- 2.01 Created Location: /rd-group/12 ----  |
     |                                                 |
</pre>
<pre>
Req: POST coap://rd.example.com/rd-group?gp=lights
Payload:
&lt;&gt;;ep="node1",
&lt;&gt;;ep="node2"

Res: 2.01 Created
Location: /rd-group/12
</pre>
<pre>
Req: POST /rd-group?gp=lights HTTP/1.1
Host: example.com
Accept: application/link-format
Payload:
&lt;&gt;;ep="node1",
&lt;&gt;;ep="node2"

Res: 201 Created
Location: /rd-group/12
</pre>
<h1 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a> <a href="#group-removal" id="group-removal">Group Removal</a></h1>
<p id="rfc.section.6.2.p.1">A group can be removed simply by sending a removal message to the location returned when registering the group. Removing a group MUST NOT remove the endpoints of the group from the RD.</p>
<p id="rfc.section.6.2.p.2">The removal request interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">Manager -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">DELETE</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+location}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>location :=</dt>
      <dd style="margin-left: 8">This is the Location path returned by the RD as a result of a successful group registration.</dd>
    </dl>
    <p> </p>
  </dd>
</dl>
<p id="rfc.section.6.2.p.4">The following responses codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.02 &#8220;Deleted&#8221; or 204 &#8220;No Content&#8221; upon successful deletion</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221;. Group does not exist.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
  <dt>HTTP support:</dt>
  <dd style="margin-left: 8">YES</dd>
</dl>
<p id="rfc.section.6.2.p.6">The following examples shows successful removal of the group from the RD.</p>
<pre>
    EP                                                RD
     |                                                 |
     | --- DELETE /rd-group/412  -------------------&gt;  |
     |                                                 |
     |                                                 |
     | &lt;-- 2.02 Deleted  ----------------------------  |
     |                                                 |
</pre>
<pre>
Req: DELETE /rd-group/12

Res: 2.02 Deleted
</pre>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#lookup" id="lookup">RD Lookup Function Set</a></h1>
<p id="rfc.section.7.p.1">In order for an RD to be used for discovering resources registered with it, a lookup interface can be provided using this function set. This lookup interface is defined as a default, and it is assumed that RDs may also support lookups to return resource descriptions in alternative formats (e.g. Atom or HTML Link) or using more advanced interfaces (e.g. supporting context or semantic based lookup).</p>
<p id="rfc.section.7.p.2">This function set allows lookups for domains, groups, endpoints and resources using attributes defined in the RD Function Set and for use with the CoRE Link Format. The result of a lookup request is the list of links (if any) corresponding to the type of lookup.  Using the Accept Option, the requester can control whether this list is returned in CoRE Link Format (<samp>application/link-format</samp>, default) or its alternate content-formats (<samp>application/link-format+json</samp> or <samp>application/link-format+cbor</samp>).<br/> The target of these links SHOULD be the actual location of the domain, endpoint or resource, but MAY be an intermediate proxy e.g. in the case of an HTTP lookup interface for CoAP endpoints. Multiple query parameters MAY be included in a lookup, all included parameters MUST match for a resource to be returned.  The character &#8216;*&#8217; MAY be included at the end of a parameter value as a wildcard operator.</p>
<p id="rfc.section.7.p.3">The lookup interface is specified as follows:</p>
<p/>

<dl>
  <dt>Interaction:</dt>
  <dd style="margin-left: 8">Client -&gt; RD</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">GET</dd>
  <dt>URI Template:</dt>
  <dd style="margin-left: 8">/{+rd-lookup-base}/{lookup-type}{?d,ep,gp,et,rt,page,count,resource-param}</dd>
  <dt>URI Template Variables:</dt>
  <dd style="margin-left: 8">
    <dl>
      <dt>rd-lookup-base :=</dt>
      <dd style="margin-left: 8">RD Lookup Function Set path (mandatory). This is the path of the RD Lookup Function Set. An RD SHOULD use the value &#8220;rd-lookup&#8221; for this variable whenever possible.</dd>
    </dl>
    <p> </p>
  </dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format (optional)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+json (optional)</dd>
  <dt>Content-Format:</dt>
  <dd style="margin-left: 8">application/link-format+cbor (optional) <dl><dt>lookup-type :=</dt><dd style="margin-left: 8">(&#8220;d&#8221;, &#8220;ep&#8221;, &#8220;res&#8221;, &#8220;gp&#8221;) (mandatory) This variable is used to select the kind of lookup to perform (domain, endpoint, resource, or group).</dd><dt>ep :=</dt><dd style="margin-left: 8">Endpoint name (optional). Used for endpoint, group and resource lookups.</dd><dt>d :=</dt><dd style="margin-left: 8">Domain (optional). Used for domain, group, endpoint and resource lookups.</dd><dt>page :=</dt><dd style="margin-left: 8">Page (optional). Parameter can not be used without the count parameter. Results are returned from result set in pages that contains &#8216;count&#8217; results starting from index (page * count).</dd><dt>count :=</dt><dd style="margin-left: 8">Count (optional). Number of results is limited to this parameter value. If the parameter is not present, then an RD implementation specific default value SHOULD be used.</dd><dt>rt :=</dt><dd style="margin-left: 8">Resource type (optional). Used for group, endpoint and resource lookups.</dd><dt>et :=</dt><dd style="margin-left: 8">Endpoint type (optional). Used for group, endpoint and resource lookups.</dd><dt>resource-param :=</dt><dd style="margin-left: 8">Link attribute parameters (optional). Any link attribute as defined in Section 4.1 of <a href="#RFC6690">[RFC6690]</a>, used for resource lookups.</dd></dl><p> </p></dd>
</dl>
<p id="rfc.section.7.p.5">The following responses codes are defined for this interface:</p>
<p/>

<dl>
  <dt>Success:</dt>
  <dd style="margin-left: 8">2.05 &#8220;Content&#8221; or 200 &#8220;OK&#8221; with an <samp>application/link-format</samp>, <samp>application/link-format+cbor</samp>, or <samp>application/link-format+json</samp> payload containing matching entries for the lookup.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.04 &#8220;Not Found&#8221; or 404 &#8220;Not Found&#8221; in case no matching entry is found for a unicast request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">No error response to a multicast request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">4.00 &#8220;Bad Request&#8221; or 400 &#8220;Bad Request&#8221;. Malformed request.</dd>
  <dt>Failure:</dt>
  <dd style="margin-left: 8">5.03 &#8220;Service Unavailable&#8221; or 503 &#8220;Service Unavailable&#8221;. Service could not perform the operation.</dd>
  <dt>HTTP support:</dt>
  <dd style="margin-left: 8">YES</dd>
</dl>
<p id="rfc.section.7.p.7">The examples in this section assume a CoAP host with IP address FDFD::123 and a default CoAP port 61616. HTTP hosts are possible and do not change the nature of the examples.  The following example shows a client performing a resource lookup:</p>
<pre>
   Client                                                          RD
     |                                                             |
     | ----- GET /rd-lookup/res?rt=temperature -----------------&gt;  |
     |                                                             |
     |                                                             |
     | &lt;-- 2.05 Content &lt;coap://[FDFD::123]:61616/temp&gt;;---------  |
     |                                  rt="temperature" --------  |
     |                                                             |
</pre>
<pre>
Req: GET /rd-lookup/res?rt=temperature

Res: 2.05 Content
&lt;coap://[FDFD::123]:61616/temp&gt;;rt="temperature"
</pre>
<p id="rfc.section.7.p.8">The following example shows a client performing an endpoint type lookup:</p>
<pre>
   Client                                                          RD
     |                                                             |
     | ----- GET /rd-lookup/ep?et=power-node --------------------&gt; |
     |                                                             |
     |                                                             |
     | &lt;-- 2.05 Content &lt;coap://[FDFD::123]:61616&gt;;ep="node5" ---- |
     |                                                             |
</pre>
<pre>
Req: GET /rd-lookup/ep?et=power-node

Res: 2.05 Content
&lt;coap://[FDFD::123]:61616&gt;;ep="node5",
&lt;coap://[FDFD::123]:61616&gt;;ep="node7"
</pre>
<p id="rfc.section.7.p.9">The following example shows a client performing a domain lookup:</p>
<pre>
   Client                                                          RD
     |                                                             |
     | ----- GET /rd-lookup/d ----------------------------------&gt;  |
     |                                                             |
     |                                                             |
     | &lt;-- 2.05 Content &lt;/rd&gt;;d=domain1,&lt;/rd&gt;;d=domain2 ---------- |
     |                                                             |
</pre>
<pre>
Req: GET /rd-lookup/d

Res: 2.05 Content
&lt;/rd&gt;;d="domain1",
&lt;/rd&gt;;d="domain2"
</pre>
<p id="rfc.section.7.p.10">The following example shows a client performing a group lookup for all groups:</p>
<pre>
   Client                                                          RD
     |                                                             |
     | ----- GET /rd-lookup/gp ---------------------------------&gt;  |
     |                                                             |
     |                                                             |
     | &lt;-- 2.05 Content &lt;/rd-group/12&gt;;gp="lights1"; ------------- |
     |                               d="example.com" ------------- |
     |                                                             |
</pre>
<pre>
Req: GET /rd-lookup/gp

Res: 2.05 Content
&lt;/rd-group/12&gt;;gp="lights1";d="example.com"
</pre>
<p id="rfc.section.7.p.11">The following example shows a client performing a lookup for all endpoints in a particular group:</p>
<pre>
   Client                                                          RD
     |                                                             |
     | ----- GET /rd-lookup/ep?gp=lights1-----------------------&gt;  |
     |                                                             |
     |                                                             |
     | &lt;-- 2.05 Content &lt;coap://[FDFD::123]:61616&gt;;ep="node1" ---- |
     |                                                             |
</pre>
<pre>
Req: GET /rd-lookup/ep?gp=lights1

Res: 2.05 Content
&lt;coap://[FDFD::123]:61616&gt;;ep="node1",
&lt;coap://[FDFD::123]:61616&gt;;ep="node2",
</pre>
<p id="rfc.section.7.p.12">The following example shows a client performing a lookup for all groups an endpoint belongs to:</p>
<pre>
   Client                                                         RD
     |                                                            |
     | ----- GET /rd-lookup/gp?ep=node1 -----------------------&gt;  |
     |                                                            |
     |                                                            |
     |&lt; 2.05 Content &lt;coap://[FDFD::123]:61616&gt;;gp="lights1"; --  |
     |                                          ep="node1" ------ |
     |                                                            |
</pre>
<pre>
Req: GET /rd-lookup/gp?ep=node1

Res: 2.05 Content
&lt;coap://[FDFD::123]:61616&gt;;gp="lights1";ep="node1",
</pre>
<h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> <a href="#attributes" id="attributes">New Link-Format Attributes</a></h1>
<p id="rfc.section.8.p.1">When using the CoRE Link Format to describe resources being discovered by or posted to a resource directory service, additional information about those resources is useful. This specification defines the following new attributes for use in the CoRE Link Format <a href="#RFC6690">[RFC6690]</a>:</p>
<pre>
   link-extension    = ( "ins" "=" quoted-string ) ; Max 63 bytes
   link-extension    = ( "exp" )
</pre>
<h1 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1.</a> <a href="#resource-instance-attribute-ins" id="resource-instance-attribute-ins">Resource Instance attribute &#8216;ins&#8217;</a></h1>
<p id="rfc.section.8.1.p.1">The Resource Instance &#8220;ins&#8221; attribute is an identifier for this resource, which makes it possible to distinguish it from other similar resources. This attribute is similar in use to the &lt;Instance&gt; portion of a DNS-SD record (see <a href="#cheshire">Section 9.1</a>, and SHOULD be unique across resources with the same Resource Type attribute in the domain it is used. A Resource Instance might be a descriptive string like &#8220;Ceiling Light, Room 3&#8221;, a short ID like &#8220;AF39&#8221; or a unique UUID or iNumber. This attribute is used by a Resource Directory to distinguish between multiple instances of the same resource type within the directory.</p>
<p id="rfc.section.8.1.p.2">This attribute MUST be no more than 63 bytes in length. The resource identifier attribute MUST NOT appear more than once in a link description.</p>
<h1 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2.</a> <a href="#export-attribute-exp" id="export-attribute-exp">Export attribute &#8216;exp&#8217;</a></h1>
<p id="rfc.section.8.2.p.1">The Export &#8220;exp&#8221; attribute is used as a flag to indicate that a link description MAY be exported by a resource directory to external directories.</p>
<p id="rfc.section.8.2.p.2">The CoRE Link Format is used for many purposes between CoAP endpoints. Some are useful mainly locally, for example checking the observability of a resource before accessing it, determining the size of a resource, or traversing dynamic resource structures. However, other links are very useful to be exported to other directories, for example the entry point resource to a functional service.</p>
<h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> <a href="#dns-sd" id="dns-sd">DNS-SD Mapping</a></h1>
<p id="rfc.section.9.p.1">CoRE Resource Discovery is intended to support fine-grained discovery of hosted resources, their attributes, and possibly other resource relations <a href="#RFC6690">[RFC6690]</a>. In contrast, service discovery generally refers to a coarse-grained resolution of an endpoint&#8217;s IP address, port number, and protocol.</p>
<p id="rfc.section.9.p.2">Resource and service discovery are complementary in the case of large networks, where the latter can facilitate scaling.  This document defines a mapping between CoRE Link Format attributes and DNS-Based Service Discovery <a href="#RFC6763">[RFC6763]</a> fields that permits discovery of CoAP services by either method.</p>
<h1 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a> <a href="#cheshire" id="cheshire">DNS-based Service discovery</a></h1>
<p id="rfc.section.9.1.p.1">DNS-Based Service Discovery (DNS-SD) defines a conventional method of configuring DNS PTR, SRV, and TXT resource records to facilitate discovery of services (such as CoAP servers in a subdomain) using the existing DNS infrastructure.  This section gives a brief overview of DNS-SD; see <a href="#RFC6763">[RFC6763]</a> for a detailed specification.</p>
<p id="rfc.section.9.1.p.2">DNS-SD service names are limited to 255 octets and are of the form:</p>
<p id="rfc.section.9.1.p.3">Service Name = &lt;Instance&gt;.&lt;ServiceType&gt;.&lt;Domain&gt;.</p>
<p id="rfc.section.9.1.p.4">The service name is the label of SRV/TXT resource records. The SRV RR specifies the host and the port of the endpoint. The TXT RR provides additional information in the form of key/value pairs.</p>
<p id="rfc.section.9.1.p.5">The &lt;Domain&gt; part of the service name is identical to the global (DNS subdomain) part of the authority in URIs that identify servers or groups of servers.</p>
<p id="rfc.section.9.1.p.6">The &lt;ServiceType&gt; part is composed of at least two labels.  The first label of the pair is the application protocol name <a href="#RFC6335">[RFC6335]</a> preceded by an underscore character.  The second label indicates the transport and is always &#8220;_udp&#8221; for UDP-based CoAP services.  In cases where narrowing the scope of the search may be useful, these labels may be optionally preceded by a subtype name followed by the &#8220;_sub&#8221; label.  An example of this more specific &lt;ServiceType&gt; is &#8220;light._sub._dali._udp&#8221;.</p>
<p id="rfc.section.9.1.p.7">A default &lt;Instance&gt; part of the service name may be set at the factory or during the commissioning process.  It SHOULD uniquely identify an instance of &lt;ServiceType&gt; within a &lt;Domain&gt;.  Taken together, these three elements comprise a unique name for an SRV/ TXT record pair within the DNS subdomain.</p>
<p id="rfc.section.9.1.p.8">The granularity of a service name MAY be that of a host or group, or it could represent a particular resource within a CoAP server.  The SRV record contains the host name (AAAA record name) and port of the service while protocol is part of the service name.  In the case where a service name identifies a particular resource, the path part of the URI must be carried in a corresponding TXT record.</p>
<p id="rfc.section.9.1.p.9">A DNS TXT record is in practice limited to a few hundred octets in length, which is indicated in the resource record header in the DNS response message.  The data consists of one or more strings comprising a key=value pair.  By convention, the first pair is txtver=&lt;number&gt; (to support different versions of a service description).</p>
<h1 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a> <a href="#ins" id="ins">mapping ins to &lt;Instance&gt;</a></h1>
<p id="rfc.section.9.2.p.1">The Resource Instance &#8220;ins&#8221; attribute maps to the &lt;Instance&gt; part of a DNS-SD service name.  It is stored directly in the DNS as a single DNS label of canonical precomposed UTF-8 <a href="#RFC3629">[RFC3629]</a> &#8220;Net-Unicode&#8221; (Unicode Normalization Form C) <a href="#RFC5198">[RFC5198]</a> text.  However, to the extent that the &#8220;ins&#8221; attribute may be chosen to match the DNS host name of a service, it SHOULD use the syntax defined in Section 3.5 of <a href="#RFC1034">[RFC1034]</a> and Section 2.1 of <a href="#RFC1123">[RFC1123]</a>.</p>
<p id="rfc.section.9.2.p.2">The &lt;Instance&gt; part of the name of a service being offered on the network SHOULD be configurable by the user setting up the service, so that he or she may give it an informative name.  However, the device or service SHOULD NOT require the user to configure a name before it can be used.  A sensible choice of default name can allow the device or service to be accessed in many cases without any manual configuration at all.  The default name should be short and descriptive, and MAY include a collision-resistant substring such as the lower bits of the device&#8217;s MAC address, serial number, fingerprint, or other identifier in an attempt to make the name relatively unique.</p>
<p id="rfc.section.9.2.p.3">DNS labels are currently limited to 63 octets in length and the entire service name may not exceed 255 octets.</p>
<h1 id="rfc.section.9.3"><a href="#rfc.section.9.3">9.3.</a> <a href="#exp" id="exp">Mapping rt to &lt;ServiceType&gt;</a></h1>
<p id="rfc.section.9.3.p.1">The resource type &#8220;rt&#8221; attribute is mapped into the &lt;ServiceType&gt; part of a DNS-SD service name and SHOULD conform to the reg-rel-type production of the Link Format defined in Section 2 of <a href="#RFC6690">[RFC6690]</a>.  The &#8220;rt&#8221; attribute MUST be composed of at least a single Net-Unicode text string, without underscore &#8216;_&#8217; or period &#8216;.&#8217; and limited to 15 octets in length, which represents the application protocol name.  This string is mapped to the DNS-SD &lt;ServiceType&gt; by prepending an underscore and appending a period followed by the &#8220;_udp&#8221; label.  For example, rt=&#8221;dali&#8221; is mapped into &#8220;_dali._udp&#8221;.</p>
<p id="rfc.section.9.3.p.2">The application protocol name may be optionally followed by a period and a service subtype name consisting of a Net-Unicode text string, without underscore or period and limited to 63 octets.  This string is mapped to the DNS-SD &lt;ServiceType&gt; by appending a period followed by the &#8220;_sub&#8221; label and then appending a period followed by the service type label pair derived as in the previous paragraph.  For example, rt=&#8221;dali.light&#8221; is mapped into &#8220;light._sub._dali._udp&#8221;.</p>
<p id="rfc.section.9.3.p.3">The resulting string is used to form labels for DNS-SD records which are stored directly in the DNS.</p>
<h1 id="rfc.section.9.4"><a href="#rfc.section.9.4">9.4.</a> <a href="#domain" id="domain">Domain mapping</a></h1>
<p id="rfc.section.9.4.p.1">DNS domains may be derived from the &#8220;d&#8221; attribute. The domain attribute may be suffixed with the zone name of the authoritative DNS server to generate the domain name. The &#8220;ep&#8221; attribute is prefixed to the domain name to generate the FQDN to be stored into DNS with an AAAA RR.</p>
<h1 id="rfc.section.9.5"><a href="#rfc.section.9.5">9.5.</a> <a href="#TXT" id="TXT">TXT Record key=value strings</a></h1>
<p id="rfc.section.9.5.p.1">A number of <a href="#RFC6763">[RFC6763]</a> key/value pairs are derived from link-format information, to be exported in the DNS-SD as key=value strings in a TXT record (<a href="#RFC6763">[RFC6763]</a>, Section 6.3).</p>
<p id="rfc.section.9.5.p.2">The resource &lt;URI&gt; is exported as key/value pair &#8220;path=&lt;URI&gt;&#8221;.</p>
<p id="rfc.section.9.5.p.3">The Interface Description &#8220;if&#8221; attribute is exported as key/value pair &#8220;if=&lt;Interface Description&gt;&#8221;.</p>
<p id="rfc.section.9.5.p.4">The DNS TXT record can be further populated by importing any other resource description attributes as they share the same key=value format specified in Section 6 of <a href="#RFC6763">[RFC6763]</a>.</p>
<h1 id="rfc.section.9.6"><a href="#rfc.section.9.6">9.6.</a> <a href="#import" id="import">Importing resource links into DNS-SD</a></h1>
<p id="rfc.section.9.6.p.1">Assuming the ability to query a Resource Directory or multicast a GET (?exp) over the local link, CoAP resource discovery may be used to populate the DNS-SD database in an automated fashion.  CoAP resource descriptions (links) can be exported to DNS-SD for exposure to service discovery by using the Resource Instance attribute as the basis for a unique service name, composed with the Resource Type as the &lt;ServiceType&gt;, and registered in the correct &lt;Domain&gt;.  The agent responsible for exporting records to the DNS zone file SHOULD be authenticated to the DNS server.  The following example shows an agent discovering a resource to be exported:</p>
<pre>
    Agent                                                          RD
      |                                                             |
      | --- GET /rd-lookup/res?exp ------------------------------&gt;  |
      |                                                             |
      |                                                             |
      | &lt;-- 2.05 Content "&lt;coap://[FDFD::1234]:5683/light/1&gt;;exp;  |
      |                   rt="dali.light";ins="Spot";               |
      |                   d="office";ep="node1"                     |
      |                                                             |
</pre>
<pre>
   Req: GET /rd-lookup/res?exp

   Res: 2.05 Content
   &lt;coap://[FDFD::1234]:5683/light/1&gt;;
     exp;rt="dali.light";ins="Spot";
               d="office";ep="node1"

</pre>
<p id="rfc.section.9.6.p.2">The agent subsequently registers the following DNS-SD RRs, assuming a zone name &#8220;example.com&#8221; prefixed with &#8220;office&#8221;:</p>
<pre>
node1.office.example.com.          IN AAAA        FDFD::1234
_dali._udp.office.example.com      IN PTR
                          Spot._dali._udp.office.example.com
light._sub._dali._udp.example.com  IN PTR
                          Spot._dali._udp.office.example.com
Spot._dali._udp.office.example.com IN SRV  0 0 5683
                          node1.office.example.com.
Spot._dali._udp.office.example.com IN TXT
                          txtver=1;path=/light/1
</pre>
<p id="rfc.section.9.6.p.3">In the above figure the Service Name is chosen as Spot._dali._udp.office.example.com without the light._sub service prefix. An alternative Service Name would be: Spot.light._sub._dali._udp.office.example.com.</p>
<h1 id="rfc.section.10"><a href="#rfc.section.10">10.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a></h1>
<p id="rfc.section.10.p.1">The security considerations as described in Section 7 of <a href="#RFC5988">[RFC5988]</a> and Section 6 of <a href="#RFC6690">[RFC6690]</a> apply. The <samp>/.well-known/core</samp> resource may be protected e.g. using DTLS when hosted on a CoAP server as described in <a href="#RFC7252">[RFC7252]</a>. DTLS or TLS based security SHOULD be used on all resource directory interfaces defined in this document.</p>
<h1 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a> <a href="#endpoint_identification" id="endpoint_identification">Endpoint Identification and Authentication</a></h1>
<p id="rfc.section.10.1.p.1">An Endpoint is determined to be unique by an RD by the Endpoint identifier parameter included during Registration, and any associated TLS or DTLS security bindings. An Endpoint MUST NOT be identified by its protocol, port or IP address as these may change over the lifetime of an Endpoint.</p>
<p id="rfc.section.10.1.p.2">Every operation performed by an Endpoint or Client on a resource directory SHOULD be mutually authenticated using Pre-Shared Key, Raw Public Key or Certificate based security. Endpoints using a Certificate MUST include the Endpoint identifier as the Subject of the Certificate, and this identifier MUST be checked by a resource directory to match the Endpoint identifier included in the Registration message.</p>
<h1 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a> <a href="#access-control" id="access-control">Access Control</a></h1>
<p id="rfc.section.10.2.p.1">Access control SHOULD be performed separately for the RD Function Set and the RD Lookup Function Set, as different endpoints may be authorized to register with an RD from those authorized to lookup endpoints from the RD. Such access control SHOULD be performed in as fine-grained a level as possible. For example access control for lookups could be performed either at the domain, endpoint or resource level.</p>
<h1 id="rfc.section.10.3"><a href="#rfc.section.10.3">10.3.</a> <a href="#denial-of-service-attacks" id="denial-of-service-attacks">Denial of Service Attacks</a></h1>
<p id="rfc.section.10.3.p.1">Services that run over UDP unprotected are vulnerable to unknowingly become part of a DDoS attack as UDP does not require return routability check. Therefore, an attacker can easily spoof the source IP of the target entity and send requests to such a service which would then respond to the target entity. This can be used for large-scale DDoS attacks on the target. Especially, if the service returns a response that is order of magnitudes larger than the request, the situation becomes even worse as now the attack can be amplified. DNS servers have been widely used for DDoS amplification attacks. Recently, it has been observed that NTP Servers, that also run on unprotected UDP have been used for DDoS attacks (http://tools.cisco.com/security/center/content/CiscoSecurityNotice/CVE-2013-5211)  since there is no return routability check and can have a large amplification factor. The responses from the NTP server were found to be 19 times larger than the request. A Resource Directory (RD) which responds to wild-card lookups is potentially vulnerable if run with CoAP over UDP.  Since there is no return routability check and the responses can be significantly larger than requests, RDs can unknowingly become part of a DDoS amplification attack. Therefore, it is RECOMMENDED that implementations ensure return routability.  This can be done, for example by responding to wild card lookups only over DTLS or TLS or TCP.</p>
<h1 id="rfc.section.11"><a href="#rfc.section.11">11.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a></h1>
<h1 id="rfc.section.11.1"><a href="#rfc.section.11.1">11.1.</a> <a href="#iana-rt" id="iana-rt">Resource Types</a></h1>
<p id="rfc.section.11.1.p.1">&#8220;core.rd&#8221;, &#8220;core.rd-group&#8221; and &#8220;core.rd-lookup&#8221; resource types need to be registered with the resource type registry defined by <a href="#RFC6690">[RFC6690]</a>.</p>
<h1 id="rfc.section.11.2"><a href="#rfc.section.11.2">11.2.</a> <a href="#iana-link-ext" id="iana-link-ext">Link Extension</a></h1>
<p id="rfc.section.11.2.p.1">The &#8220;exp&#8221; attribute needs to be registered when a future Web Linking link-extension registry is created (e.g. in RFC5988bis).</p>
<h1 id="rfc.section.11.3"><a href="#rfc.section.11.3">11.3.</a> <a href="#iana-registry" id="iana-registry">RD Parameter Registry</a></h1>
<p id="rfc.section.11.3.p.1">This specification defines a new sub-registry for registration and lookup parameters called &#8220;RD Parameters&#8221; under &#8220;CoRE Parameters&#8221;. Although this specification defines a basic set of parameters, it is expected that other standards that make use of this interface will define new ones.</p>
<p id="rfc.section.11.3.p.2">Each entry in the registry must include the human readable name of the parameter, the query parameter, validity requirements if any and a description. The query parameter MUST be a valid URI query key <a href="#RFC3986">[RFC3986]</a>.</p>
<p id="rfc.section.11.3.p.3">Initial entries in this sub-registry are as follows:</p>
<div id="rfc.table.1"/>
<div id="tab-registry"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>RD Parameters</caption>
  <thead>
    <tr>
      <th class="left">Name</th>
      <th class="left">Query</th>
      <th class="left">Validity</th>
      <th class="left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">Endpoint Name</td>
      <td class="left">ep</td>
      <td class="left"/>
      <td class="left">Name of the endpoint</td>
    </tr>
    <tr>
      <td class="left">Lifetime</td>
      <td class="left">lt</td>
      <td class="left">60-4294967295</td>
      <td class="left">Lifetime of the registration in seconds</td>
    </tr>
    <tr>
      <td class="left">Domain</td>
      <td class="left">d</td>
      <td class="left"/>
      <td class="left">Domain to which this endpoint belongs</td>
    </tr>
    <tr>
      <td class="left">Endpoint Type</td>
      <td class="left">et</td>
      <td class="left"/>
      <td class="left">Semantic name of the endpoint</td>
    </tr>
    <tr>
      <td class="left">Context</td>
      <td class="left">con</td>
      <td class="left">URI</td>
      <td class="left">The scheme, address and port at which this server is available</td>
    </tr>
    <tr>
      <td class="left">Endpoint Name</td>
      <td class="left">ep</td>
      <td class="left"/>
      <td class="left">Name of the endpoint, max 63 bytes</td>
    </tr>
    <tr>
      <td class="left">Group Name</td>
      <td class="left">gp</td>
      <td class="left"/>
      <td class="left">Name of a group in the RD</td>
    </tr>
    <tr>
      <td class="left">Page</td>
      <td class="left">page</td>
      <td class="left">Integer</td>
      <td class="left">Used for pagination</td>
    </tr>
    <tr>
      <td class="left">Count</td>
      <td class="left">count</td>
      <td class="left">Integer</td>
      <td class="left">Used for pagination</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.11.3.p.4">The IANA policy for future additions to the sub-registry is &#8220;Expert Review&#8221; as described in <a href="#RFC5226">[RFC5226]</a>.</p>
<h1 id="rfc.section.12"><a href="#rfc.section.12">12.</a> <a href="#examples" id="examples">Examples</a></h1>
<p id="rfc.section.12.p.1">Examples are added here.</p>
<h1 id="rfc.section.12.1"><a href="#rfc.section.12.1">12.1.</a> <a href="#lt-ex" id="lt-ex">Lighting Installation</a></h1>
<p id="rfc.section.12.1.p.1">This example shows a simplified lighting installation which makes use of the Resource Directory (RD) with a CoAP interface to facilitate the installation and start up of the application code in the lights and sensors. In particular, the example leads to the definition of a group and the enabling of the corresponding multicast address. No conclusions must be drawn on the realization of actual installation procedures, because the example &#8220;emphasizes&#8221; some of the issues that may influence the use of the RD.</p>
<h1 id="rfc.section.12.1.1"><a href="#rfc.section.12.1.1">12.1.1.</a> <a href="#lt-in-ch" id="lt-in-ch">Installation Characteristics</a></h1>
<p id="rfc.section.12.1.1.p.1">The example assumes that the installation is managed. That means that a Commissioning Tool (CT) is used to authorize the addition of nodes, name them, and name their services. The CT can be connected to the installation in many ways: the CT can be part of the installation network, connected by WiFi to the installation network, or connected via GPRS link, or other method.</p>
<p id="rfc.section.12.1.1.p.2">It is assumed that there are two naming authorities for the installation: (1) the network manager that is responsible for the correct operation of the network and the connected interfaces, and (2) the lighting manager that is responsible for the correct functioning of networked lights and sensors.  The result is the existence of two naming schemes coming from the two managing entities.</p>
<p id="rfc.section.12.1.1.p.3">The example installation consists of one presence sensor, and two luminaries, luminary1 and luminary2, each with their own wireless interface. Each luminary contains three lamps: left, right and middle. Each luminary is accessible through one end-point. For each lamp a resource exists to modify the settings of a lamp in a luminary. The purpose of the installation is that the presence sensor notifies the presence of persons to a group of lamps. The group of lamps consists of: middle and left lamps of luminary1 and right lamp of luminary2.</p>
<p id="rfc.section.12.1.1.p.4">Before commissioning by the lighting manager, the network is installed and access to the interfaces is proven to work by the network manager. Following the lay-out of cables and routers the network manager has defined DNS domains.  The presence sensor and luminary1 are part of DNS domain: rtr_5612_rrt.example.com and luminary2 is part of rtr_7899_pfa.example.com.  The names of luminary1- luminary2-, and sensor- interfaces are respectively: lm_12-345-678, lm_12-456-378, and sn_12-345-781. These names are stored in DNS together with their IP addresses. The FQDN of the interfaces is shown in <a href="#interface-F">Table 2</a> below:</p>
<div id="rfc.table.2"/>
<div id="interface-F"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>interface FQDNs</caption>
  <thead>
    <tr>
      <th class="left">Name</th>
      <th class="left">FQDN</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">luminary1</td>
      <td class="left">lm_12-345-678.rtr_5612_rrt.example.com</td>
    </tr>
    <tr>
      <td class="left">luminary2</td>
      <td class="left">lm_12-456-378.rtr_7899_pfa.example.com</td>
    </tr>
    <tr>
      <td class="left">Presence sensor</td>
      <td class="left">sn_12-345-781.rtr_5612_rrt.example.com</td>
    </tr>
    <tr>
      <td class="left">Resource directory</td>
      <td class="left">pc_123456.rtr_5612_rrt.example.com</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.12.1.1.p.5">At the moment of installation, the network under installation is not necessarily connected to the DNS infra structure. Therefore, SLAAC IPv6 addresses are assigned to CT, RD, luminaries and sensor shown in <a href="#interface-S">Table 3</a> below:</p>
<div id="rfc.table.3"/>
<div id="interface-S"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>interface SLAAC addresses</caption>
  <thead>
    <tr>
      <th class="left">Name</th>
      <th class="left">IPv6 address</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">luminary1</td>
      <td class="left">FDFD::ABCD:1</td>
    </tr>
    <tr>
      <td class="left">luminary2</td>
      <td class="left">FDFD::ABCD:2</td>
    </tr>
    <tr>
      <td class="left">Presence sensor</td>
      <td class="left">FDFD::ABCD:3</td>
    </tr>
    <tr>
      <td class="left">Resource directory</td>
      <td class="left">FDFD::ABCD:0</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.12.1.1.p.6">In <a href="#rd-en">Section 12.1.2</a> the use of resource directory during installation is presented. In <a href="#dns-en">Section 12.1.3</a> the connection to DNS is discussed.</p>
<h1 id="rfc.section.12.1.2"><a href="#rfc.section.12.1.2">12.1.2.</a> <a href="#rd-en" id="rd-en">RD entries</a></h1>
<p id="rfc.section.12.1.2.p.1">It is assumed that access to the DNS infrastructure is not always possible during installation. Therefore, the SLAAC addresses are used in this section.</p>
<p id="rfc.section.12.1.2.p.2">For discovery, the resource types (rt) of the devices are important. The lamps in the luminaries have rt: light, and the presence sensor has rt: p-sensor.  The end-points have names which are relevant to the light installation manager.  In this case luminary1, luminary2, and the presence sensor are located in room 2-4-015, where luminary1 is located at the window and luminary2 and the presence sensor are located at the door. The end-point names reflect this physical location. The middle, left and right lamps are accessed via path /light/middle, /light/left, and /light/right respectively. The identifiers relevant to the Resource Directory are shown in <a href="#end-point">Table 4</a> below:</p>
<div id="rfc.table.4"/>
<div id="end-point"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>Resource Directory identifiers</caption>
  <thead>
    <tr>
      <th class="left">Name</th>
      <th class="left">end-point</th>
      <th class="left">resource path</th>
      <th class="left">resource type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">luminary1</td>
      <td class="left">lm_R2-4-015_wndw</td>
      <td class="left">/light/left</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">luminary1</td>
      <td class="left">lm_R2-4-015_wndw</td>
      <td class="left">/light/middle</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">luminary1</td>
      <td class="left">lm_R2-4-015_wndw</td>
      <td class="left">/light/right</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">luminary2</td>
      <td class="left">lm_R2-4-015_door</td>
      <td class="left">/light/left</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">luminary2</td>
      <td class="left">lm_R2-4-015_door</td>
      <td class="left">/light/middle</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">luminary2</td>
      <td class="left">lm_R2-4-015_door</td>
      <td class="left">/light/right</td>
      <td class="left">light</td>
    </tr>
    <tr>
      <td class="left">Presence sensor</td>
      <td class="left">ps_R2-4-015_door</td>
      <td class="left">/ps</td>
      <td class="left">p-sensor</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.12.1.2.p.3">The CT inserts the end-points of the luminaries and the sensor in the RD using the Context parameter (con) to specify the interface address:</p>
<pre>
Req: POST coap://[FDFD::ABCD:0]/rd
  ?ep=lm_R2-4-015_wndw&amp;con=coap://[FDFD::ABCD:1]
Payload:
&lt;/light/left&gt;;rt="light";
  d="R2-4-015";ins="lamp4444";exp,
&lt;/light/middle&gt;;rt="light";
  d="R2-4-015";ins="lamp5555";exp,
&lt;/light/right&gt;;rt="light";
  d="R2-4-015";ins="lamp6666";exp

Res: 2.01 Created
Location: /rd/4521
</pre>
<pre>
Req: POST coap://[FDFD::ABCD:0]/rd
  ?ep=lm_R2-4-015_door&amp;con=coap://[FDFD::ABCD:2]
Payload:
&lt;/light/left&gt;;rt="light";
  d="R2-4-015";ins="lamp1111";exp,
&lt;/light/middle&gt;;rt="light";
  d="R2-4-015";ins="lamp2222";exp,
&lt;/light/right&gt;;rt="light";
  d="R2-4-015";ins="lamp3333";exp

Res: 2.01 Created
Location: /rd/4522
</pre>
<pre>
Req: POST coap://[FDFD::ABCD:0]/rd
  ?ep=ps_R2-4-015_door&amp;con=coap://[FDFD::ABCD:3]
Payload:
&lt;/ps&gt;;rt="p-sensor";
  d="R2-4-015";ins="pres1234";exp

Res: 2.01 Created
Location: /rd/4523
</pre>
<p id="rfc.section.12.1.2.p.4">The domain name d=&#8221;R2-4-015&#8221; has been added for an efficient lookup because filtering on &#8220;ep&#8221; name is awkward. The same domain name is communicated to the two luminaries and the presence sensor by the CT. The &#8220;exp&#8221; attribute is set for the later administration in DNS of the instance name ins=&#8221;lampxxxx&#8221;.</p>
<p id="rfc.section.12.1.2.p.5">Once the individual endpoints are registered, the group needs to be registered.  Because the presence sensor sends one multicast message to the luminaries, all lamps in the group need to have an identical path. This path is created on the two luminaries using the batch command defined in <a href="#I-D.ietf-core-interfaces">[I-D.ietf-core-interfaces]</a>. The path to a batch of lamps is defined as: /light/grp1. In the example below, two endpoints are updated with an additional resource using the path /light/grp1 on the two luminaries.</p>
<pre>
Req: POST
 coap://[FDFD::ABCD:1]/light/grp1
 (Content-Format:application/link-format)&lt;light/middle&gt;,&lt;light/left&gt;

Res: 2.04 Changed

Req: POST
 coap://[FDFD::ABCD:2]/light/grp1
(Content-Format:application/link-format)&lt;light/right&gt;

Res: 2.04 Changed
</pre>
<p id="rfc.section.12.1.2.p.6">The group is specified in the RD. The Context parameter is set to the site-local multicast address allocated to the group.  In the POST in the example below, these two end-points and the end-point of the presence sensor are registered as members of the group.</p>
<p id="rfc.section.12.1.2.p.7">It is expected that Standards Developing Organizations (SDOs) may develop other special purpose protocols to specify additional group links, group membership, group names and other parameters in the individual nodes.</p>
<pre>
Req: POST coap://[FDFD::ABCD:0]/rd-group
?gp=grp_R2-4-015;con="coap//[FF05::1]";exp;ins="grp1234"
Payload:
&lt;&gt;ep=lm_R2-4-015_wndw,
&lt;&gt;ep=lm_R2-4-015_door,
&lt;&gt;ep=ps_R2-4-015_door

Res: 2.01 Created
Location: /rd-group/501
</pre>
<p id="rfc.section.12.1.2.p.8">After the filling of the RD by the CT, the application in the luminaries can learn to which groups they belong, and enable their interface for the multicast address.</p>
<p id="rfc.section.12.1.2.p.9">The luminary, knowing its domain, queries the RD for the end-point with rt=light and d=R2-4-015. The RD returns all end-points in the domain.</p>
<pre>
Req: GET coap://[FDFD::ABCD:0]/rd-lookup/ep
  ?d=R2-4-015;rt=light

Res: 2.05 Content
&lt;coap://[FDFD::ABCD:1]&gt;;
  ep="lm_R2-4-015_wndw",
&lt;coap://[FDFD::ABCD:2]&gt;;
   ep="lm_R2-4-015_door"
</pre>
<p id="rfc.section.12.1.2.p.10">Knowing its own IPv6 address, the luminary discovers its endpoint name. With the end-point name the luminary queries the RD for all groups to which the end-point belongs.</p>
<pre>
Req: GET coap://[FDFD::ABCD:0]/rd-lookup/gp
  ?ep=lm_R2-4-015_wndw

Res: 2.05 Content
&lt;coap://[FF05::1]&gt;;gp="grp_R2-4-015"
</pre>
<p id="rfc.section.12.1.2.p.11">From the context parameter value, the luminary learns the multicast address of the multicast group.</p>
<p id="rfc.section.12.1.2.p.12">Alternatively, the CT can communicate the multicast address directly to the luminaries by using the &#8220;coap-group&#8221; resource specified in <a href="#RFC7390">[RFC7390]</a>.</p>
<pre>
Req: POST //[FDFD::ABCD:1]/coap-group
          Content-Format: application/coap-group+json
       { "a": "[FF05::1]" }
       { "n": "grp_R2-4-015"}

Res: 2.01 Created
Location-Path: /coap-group/1
</pre>
<p id="rfc.section.12.1.2.p.13">Dependent on the situation only the address ,&#8221;a&#8221;, or the name, &#8220;n&#8221;, is specified in the coap-group resource. Instead of the RD group name also the DNS group name can be used.</p>
<h1 id="rfc.section.12.1.3"><a href="#rfc.section.12.1.3">12.1.3.</a> <a href="#dns-en" id="dns-en">DNS entries</a></h1>
<p id="rfc.section.12.1.3.p.1">The network manager assigns the domain bc.example.com to the entries coming from the RD.  The agent that looks up the resource directory uses the domain name bc.example.com as prescribed, to enter the services and hosts into the DNS.</p>
<p id="rfc.section.12.1.3.p.2">The agent does a lookup as specified in <a href="#import">Section 9.6</a>. The RD returns all entries annotated with &#8220;exp&#8221;. The agent subsequently registers the following DNS-SD RRs:</p>
<pre>
lm_R2-4-015_wndw.bc.example.com.        IN AAAA      FDFD::ABCD:1
lm_R2-4-015_door.bc.example.com.        IN AAAA      FDFD::ABCD:2
ps_R2-4-015_door.bc.example.com.        IN AAAA      FDFD::ABCD:3
_light._udp.bc.example.com              IN PTR
                           lamp1111._light._udp.bc.example.com
_light._udp.bc.example.com              IN PTR
                           lamp2222._light._udp.bc.example.com
_light._udp.bc.example.com              IN PTR
                           lamp3333._light._udp.bc.example.com
_light._udp.bc.example.com              IN PTR
                           lamp4444._light._udp.bc.example.com
_light._udp.bc.example.com              IN PTR
                           lamp5555._light._udp.bc.example.com
_light._udp.bc.example.com              IN PTR
                           lamp6666._light._udp.bc.example.com
_p-sensor._udp.bc.example.com           IN PTR
                       pres12324._p-sensor._udp.bc.example.com
lamp1111._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_door.bc.example.com.
lamp1111._light._udp.bc.example.com     IN TXT
                                     txtver=1;path=/light/left
lamp2222._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_door.bc.example.com.
lamp2222._light._udp.bc.example.com     IN TXT
                                   txtver=1;path=/light/middle
lamp3333._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_door.bc.example.com.
lamp3333._light._udp.bc.example.com     IN TXT
                                    txtver=1;path=/light/right
lamp4444._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_wndw.bc.example.com.
lamp4444._light._udp.bc.example.com     IN TXT
                                     txtver=1;path=/light/left
lamp5555._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_wndw.bc.example.com.
lamp5555._light._udp.bc.example.com     IN TXT
                                   txtver=1;path=/light/middle
lamp6666._light._udp.bc.example.com     IN SRV  0 0 5683
                              lm_R2-4-015_wndw.bc.example.com.
lamp6666._light._udp.bc.example.com     IN TXT
                                    txtver=1;path=/light/right
pres1234._p-sensor._udp.bc.example.com  IN SRV  0 0 5683
                              ps_R2-4-015_door.bc.example.com.
pres1234._p-sensor._udp.bc.example.com  IN TXT
                                             txtver=1;path=/ps
</pre>
<p id="rfc.section.12.1.3.p.3">To ask for all lamps is equivalent to returning all PTR RR with label _light.udp.bc.example.com.  from the DNS. When it is required to filter on the rd=R2-4-015 value in the DNS, additional PTR RRs have to be entered into the DNS.</p>
<pre>
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp1111._light._udp.bc.example.com
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp2222._light._udp.bc.example.com
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp3333._light._udp.bc.example.com
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp4444._light._udp.bc.example.com
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp5555._light._udp.bc.example.com
R2-4-015._light._udp.bc.example.com              IN PTR
                           lamp6666._light._udp.bc.example.com
</pre>
<p id="rfc.section.12.1.3.p.4">Returning all PTR RRs with label R2-4-015._light._udp.bc.example.com provides all service instances within the domain R2-4-015. This filtering can be handy when there are many rooms. In the example there is only one room, making the filtering superfluous.</p>
<p id="rfc.section.12.1.3.p.5">The agent can also discover groups that need to be discovered. It queries RD to return all groups which are exported.</p>
<pre>
   Req: GET /rd-lookup/gp?exp

   Res: 2.05 Content
   &lt;coap://[FF05::1]/&gt;;exp;gp="grp_R2-4-015;ins="grp1234";
ep="lm_R2-4-015_wndw";
ep="lm_R2-4-015_door

</pre>
<p id="rfc.section.12.1.3.p.6">The group with FQDN grp_R2-4-015.bc.example.com can be entered into the DNS by the agent. The accompanying instance name is grp1234. The &lt;ServiceType&gt; is chosen to be _group._udp. The agent enters the following RRs into the DNS.</p>
<pre>
grp_R2-4-015.bc.example.com.        IN AAAA            FF05::1
_group._udp.bc.example.com          IN PTR
                            grp1234._group._udp.bc.example.com
grp1234._group._udp.bc.example.com  IN SRV  0 0 5683
                             grp_R2-4-015_door.bc.example.com.
grp1234._group._udp.bc.example.com  IN TXT
                                     txtver=1;path=/light/grp1
</pre>
<h1 id="rfc.section.12.1.4"><a href="#rfc.section.12.1.4">12.1.4.</a> <a href="#rd-op" id="rd-op">RD Operation</a></h1>
<p id="rfc.section.12.1.4.p.1">The specification of the group can be used by devices other than the luminaries and the sensor to learn the multicast address of the group in a given room.  For example a smart phone may be used to adjust the lamps in the room.</p>
<p id="rfc.section.12.1.4.p.2">After entry into the room, on request of the user, the smart phone queries the presence of RDs and may display all the domain names found on the RDs.  The user can, for example, scroll all domains (room names in this case) and select the room that he entered. After selection the phone shows all groups in the selected room with their members. Selecting a group, the user can dim, switch on/off the group of lights, or possibly even create temporary new groups.</p>
<p id="rfc.section.12.1.4.p.3">In all examples the SLAAC IPv6 address can be exchanged with the FQDN, when a connection to DNS exists.  Using the FQDN, a node learns the interface&#8217;s IPv6 address, or the group&#8217;s multicast address from DNS.  In the same way the presence sensor can learn the multicast address to which it should send its presence messages.</p>
<h1 id="rfc.section.12.2"><a href="#rfc.section.12.2">12.2.</a> <a href="#lwm2m-ex" id="lwm2m-ex">OMA Lightweight M2M (LWM2M) Example</a></h1>
<p id="rfc.section.12.2.p.1">This example shows how the OMA LWM2M specification makes use of Resource Directory (RD).</p>
<p id="rfc.section.12.2.p.2">OMA LWM2M is a profile for device services based on CoAP, CoRE RD, and other IETF RFCs and drafts. LWM2M defines a simple object model and a number of abstract interfaces and operations for device management and device service enablement.</p>
<p id="rfc.section.12.2.p.3">An LWM2M server is an instance of an LWM2M middleware service layer, containing a Resource Directory along with other LWM2M interfaces defined by the LWM2M specification.</p>
<p id="rfc.section.12.2.p.4">CoRE Resource Directory (RD) is used to provide the LWM2M Registration interface.</p>
<p id="rfc.section.12.2.p.5">LWM2M does not provide for registration domains and does not currently use the rd-group or rd-lookup interfaces.</p>
<p id="rfc.section.12.2.p.6">The LWM2M specification describes a set of interfaces and a resource model used between a LWM2M device and an LWM2M server. Other interfaces, proxies, applications, and function sets are currently out of scope for LWM2M.</p>
<p id="rfc.section.12.2.p.7">The location of the LWM2M Server and RD Function Set is provided by the LWM2M Bootstrap process, so no dynamic discovery of the RD function set is used. LWM2M Servers and endpoints are not required to implement the ./well-known/core resource.</p>
<h1 id="rfc.section.12.2.1"><a href="#rfc.section.12.2.1">12.2.1.</a> <a href="#lwm2m-obj" id="lwm2m-obj">The LWM2M Object Model</a></h1>
<p id="rfc.section.12.2.1.p.1">The OMA LWM2M object model is based on a simple 2 level class hierarchy consisting of Objects and Resources.</p>
<p id="rfc.section.12.2.1.p.2">An LWM2M Resource is a REST endpoint, allowed to be a single value or an array of values of the same data type.</p>
<p id="rfc.section.12.2.1.p.3">An LWM2M Object is a resource template and container type that encapsulates a set of related resources. An LWM2M Object represents a specific type of information source; for example, there is a LWM2M Device Management object that represents a network connection, containing resources that represent individual properties like radio signal strength.</p>
<p id="rfc.section.12.2.1.p.4">Since there may potentially be more than one of a given type object, for example more than one network connection, LWM2M defines instances of objects that contain the resources that represent a specific physical thing.</p>
<p id="rfc.section.12.2.1.p.5">The URI template for LWM2M consists of a base URI followed by Object, Instance, and Resource IDs:</p>
<p id="rfc.section.12.2.1.p.6">{/base-uri}{/object-id}{/object-instance}{/resource-id}{/resource-instance}</p>
<p id="rfc.section.12.2.1.p.7">The five variables given here are strings.  base-uri can also have the special value &#8220;undefined&#8221; (sometimes called &#8220;null&#8221; in RFC 6570).  Each of the variables object-instance, resource-id, and resource-instance can be the special value &#8220;undefined&#8221; only if the values behind it in this sequence also are &#8220;undefined&#8221;.  As a special case, object-instance can be &#8220;empty&#8221; (which is different from &#8220;undefined&#8221;) if resource-id is not &#8220;undefined&#8221;.  <a id="_TEMPLATE_TODO" class="info">[_TEMPLATE_TODO]<span class="info">This text needs some help from an RFC 6570 expert.</span></a></p>
<p id="rfc.section.12.2.1.p.8">base-uri := Base URI for LWM2M resources or &#8220;undefined&#8221; for default (empty) base URI</p>
<p id="rfc.section.12.2.1.p.9">object-id := OMNA registered object ID (0-65535)</p>
<p id="rfc.section.12.2.1.p.10">object-instance := Object instance identifier (0-65535) or &#8220;undefined&#8221;/&#8221;empty&#8221; (see above)) to refer to all instances of an object ID</p>
<p id="rfc.section.12.2.1.p.11">resource-id := OMNA registered resource ID (0-65535) or &#8220;undefined&#8221; to refer to all resources within an instance</p>
<p id="rfc.section.12.2.1.p.12">resource-instance := Resource instance identifier or &#8220;undefined&#8221; to refer to single instance of a resource</p>
<p id="rfc.section.12.2.1.p.13">LWM2M IDs are 16 bit unsigned integers represented in decimal (no leading zeroes except for the value 0) by URI format strings. For example, a LWM2M URI might be:</p>
<pre>
/1/0/1
</pre>
<p id="rfc.section.12.2.1.p.14">The base uri is empty, the Object ID is 1, the instance ID is 0, the resource ID is 1, and the resource instance is &#8220;undefined&#8221;. This example URI points to internal resource 1, which represents the registration lifetime configured, in instance 0 of a type 1 object (LWM2M Server Object).</p>
<h1 id="rfc.section.12.2.2"><a href="#rfc.section.12.2.2">12.2.2.</a> <a href="#lwm2m-reg" id="lwm2m-reg">LWM2M Register Endpoint</a></h1>
<p id="rfc.section.12.2.2.p.1">LWM2M defines a registration interface based on the Resource Directory Function Set, described in <a href="#rd">Section 5</a>. The URI of the LWM2M Resource Directory function set is specified to be &#8220;/rd&#8221; as recommended in <a href="#registration">Section 5.2</a>.</p>
<p id="rfc.section.12.2.2.p.2">LWM2M endpoints register object IDs, for example &lt;/1&gt;, to indicate that a particular object type is supported, and register object instances, for example &lt;/1/0&gt;, to indicate that a particular instance of that object type exists.</p>
<p id="rfc.section.12.2.2.p.3">Resources within the LWM2M object instance are not registered with the RD, but may be discovered by reading the resource links from the object instance using GET with a CoAP Content-Format of application/link-format. Resources may also be read as a structured object by performing a GET to the object instance with a Content-Format of senml+json.</p>
<p id="rfc.section.12.2.2.p.4">When an LWM2M object or instance is registered, this indicates to the LWM2M server that the object and it&#8217;s resources are available for management and service enablement (REST API) operations.</p>
<p id="rfc.section.12.2.2.p.5">LWM2M endpoints may use the following RD registration parameters as defined in <a href="#tab-registry">Table 1</a> :</p>
<pre>
ep - Endpoint Name
lt - registration lifetime
</pre>
<p id="rfc.section.12.2.2.p.6">Endpoint Name is mandatory, all other registration parameters are optional.</p>
<p id="rfc.section.12.2.2.p.7">Additional optional LWM2M registration parameters are defined:</p>
<div id="rfc.table.5"/>
<div id="tab-lwm2m-registry"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>LWM2M Additional Registration Parameters</caption>
  <thead>
    <tr>
      <th class="left">Name</th>
      <th class="left">Query</th>
      <th class="left">Validity</th>
      <th class="left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">Protocol Binding</td>
      <td class="left">b</td>
      <td class="left">{&#8220;U&#8221;,UQ&#8221;,&#8221;S&#8221;,&#8221;SQ&#8221;,&#8221;US&#8221;,&#8221;UQS&#8221;}</td>
      <td class="left">Available Protocols</td>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">LWM2M Version</td>
      <td class="left">ver</td>
      <td class="left">1.0</td>
      <td class="left">Spec Version</td>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">SMS Number</td>
      <td class="left">sms</td>
      <td class="left"/>
      <td class="left">MSISDN</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.12.2.2.p.8">The following RD registration parameters are not currently specified for use in LWM2M:</p>
<pre>
et - Endpoint Type 
con - Context
</pre>
<p id="rfc.section.12.2.2.p.9">The endpoint registration must include a payload containing links to all supported objects and existing object instances, optionally including the appropriate link-format relations.</p>
<p id="rfc.section.12.2.2.p.10">Here is an example LWM2M registration payload:</p>
<pre>
&lt;/1&gt;,&lt;/1/0&gt;,&lt;/3/0&gt;,&lt;/5&gt;
</pre>
<p id="rfc.section.12.2.2.p.11">This link format payload indicates that object ID 1 (LWM2M Server Object) is supported, with a single instance 0 existing, object ID 3 (LWM2M Device object) is supported, with a single instance 0 existing, and object 5 (LWM2M Firmware Object) is supported, with no existing instances.</p>
<h1 id="rfc.section.12.2.3"><a href="#rfc.section.12.2.3">12.2.3.</a> <a href="#lwm2m-altbase" id="lwm2m-altbase">Alternate Base URI</a></h1>
<p id="rfc.section.12.2.3.p.1">If the LWM2M endpoint exposes objects at a base URI other than the default empty base path, the endpoint must register the base URI using rt=&#8221;oma.lwm2m&#8221;. An example link payload using alternate base URI would be:</p>
<pre>
&lt;/my_lwm2m&gt;;rt="oma.lwm2m",&lt;/my_lwm2m/1&gt;,&lt;my_lwm2m/1/0&gt;,&lt;my_lwm2m/5&gt;
</pre>
<p id="rfc.section.12.2.3.p.2">This link payload indicates that the lwm2m objects will be placed under the base URI &#8220;/my_lwm2m&#8221; and that object ID 1 (server) is supported, with a single instance 0 existing, and object 5 (firmware update) is supported.</p>
<h1 id="rfc.section.12.2.4"><a href="#rfc.section.12.2.4">12.2.4.</a> <a href="#lwm2m-regupdate" id="lwm2m-regupdate">LWM2M Update Endpoint Registration</a></h1>
<p id="rfc.section.12.2.4.p.1">An LWM2M Registration update proceeds as described in <a href="#update">Section 5.3</a>, and adds some optional parameter updates:</p>
<pre>
lt - Registration Lifetime
b - Protocol Binding
sms - MSISDN
link payload - new or modified links
</pre>
<p id="rfc.section.12.2.4.p.2">A Registration update is also specified to be used to update the LWM2M server whenever the endpoint&#8217;s UDP port or IP address are changed.</p>
<h1 id="rfc.section.12.2.5"><a href="#rfc.section.12.2.5">12.2.5.</a> <a href="#lwm2m-dereg" id="lwm2m-dereg">LWM2M De-Register Endpoint</a></h1>
<p id="rfc.section.12.2.5.p.1">LWM2M allows for de-registration using the delete method on the returned location from the initial registration operation. LWM2M de-registration proceeds as described in <a href="#removal">Section 5.4</a>.</p>
<h1 id="rfc.section.13"><a href="#rfc.section.13">13.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<p id="rfc.section.13.p.1">Srdjan Krco, Szymon Sasin, Kerry Lynn, Esko Dijk, Anders Brandt, Matthieu Vial, Mohit Sethi, Sampo Ukkola and Linyi Tian have provided helpful comments, discussions and ideas to improve and shape this document. Section 9 is based on an earlier draft by Kerry Lynn. Zach would also like to thank his colleagues from the EU FP7 SENSEI project, where many of the resource directory concepts were originally developed.</p>
<h1 id="rfc.section.14"><a href="#rfc.section.14">14.</a> <a href="#changelog" id="changelog">Changelog</a></h1>
<p id="rfc.section.14.p.1">changes from -06 to -07</p>
<p/>

<ul>
  <li>added text in the discovery section to allow content format hints to be exposed in the discovery link attributes</li>
  <li>editorial updates to section 9</li>
  <li>update author information</li>
  <li>minor text corrections</li>
</ul>
<p id="rfc.section.14.p.3">Changes from -05 to -06</p>
<p/>

<ul>
  <li>added note that the PATCH section is contingent on the progress of the PATCH method</li>
</ul>
<p id="rfc.section.14.p.5">changes from -04 to -05</p>
<p/>

<ul>
  <li>added Update Endpoint Links using PATCH</li>
  <li>http access made explicit in interface specification</li>
  <li>Added http examples</li>
</ul>
<p id="rfc.section.14.p.7">Changes from -03 to -04:</p>
<p/>

<ul>
  <li>Added http response codes</li>
  <li>Clarified endpoint name usage</li>
  <li>Add application/link-format+cbor content-format</li>
</ul>
<p id="rfc.section.14.p.9">Changes from -02 to -03:</p>
<p/>

<ul>
  <li>Added an example for lighting and DNS integration</li>
  <li>Added an example for RD use in OMA LWM2M</li>
  <li>Added Read Links operation for link inspection by endpoints</li>
  <li>Expanded DNS-SD section</li>
  <li>Added draft authors Peter van der Stok and Michael Koster</li>
</ul>
<p id="rfc.section.14.p.11">Changes from -01 to -02:</p>
<p/>

<ul>
  <li>Added a catalogue use case.</li>
  <li>Changed the registration update to a POST with optional link format payload. Removed the endpoint type update from the update.</li>
  <li>Additional examples section added for more complex use cases.</li>
  <li>New DNS-SD mapping section.</li>
  <li>Added text on endpoint identification and authentication.</li>
  <li>Error code 4.04 added to Registration Update and Delete requests.</li>
  <li>Made 63 bytes a SHOULD rather than a MUST for endpoint name and resource type parameters.</li>
</ul>
<p id="rfc.section.14.p.13">Changes from -00 to -01:</p>
<p/>

<ul>
  <li>Removed the ETag validation feature.</li>
  <li>Place holder for the DNS-SD mapping section.</li>
  <li>Explicitly disabled GET or POST on returned Location.</li>
  <li>New registry for RD parameters.</li>
  <li>Added support for the JSON Link Format.</li>
  <li>Added reference to the Groupcomm WG draft.</li>
</ul>
<p id="rfc.section.14.p.15">Changes from -05 to WG Document -00:</p>
<p/>

<ul>
  <li>Updated the version and date.</li>
</ul>
<p id="rfc.section.14.p.17">Changes from -04 to -05:</p>
<p/>

<ul>
  <li>Restricted Update to parameter updates.</li>
  <li>Added pagination support for the Lookup interface.</li>
  <li>Minor editing, bug fixes and reference updates.</li>
  <li>Added group support.</li>
  <li>Changed rt to et for the registration and update interface.</li>
</ul>
<p id="rfc.section.14.p.19">Changes from -03 to -04:</p>
<p/>

<ul>
  <li>Added the ins= parameter back for the DNS-SD mapping.</li>
  <li>Integrated the Simple Directory Discovery from Carsten.</li>
  <li>Editorial improvements.</li>
  <li>Fixed the use of ETags.</li>
  <li>Fixed tickets 383 and 372</li>
</ul>
<p id="rfc.section.14.p.21">Changes from -02 to -03:</p>
<p/>

<ul>
  <li>Changed the endpoint name back to a single registration parameter ep= and removed the h= and ins= parameters.</li>
  <li>Updated REST interface descriptions to use RFC6570 URI Template format.</li>
  <li>Introduced an improved RD Lookup design as its own function set.</li>
  <li>Improved the security considerations section.</li>
  <li>Made the POST registration interface idempotent by requiring the ep= parameter to be present.</li>
</ul>
<p id="rfc.section.14.p.23">Changes from -01 to -02:</p>
<p/>

<ul>
  <li>Added a terminology section.</li>
  <li>Changed the inclusion of an ETag in registration or update to a MAY.</li>
  <li>Added the concept of an RD Domain and a registration parameter for it.</li>
  <li>Recommended the Location returned from a registration to be stable, allowing for endpoint and Domain information to be changed during updates.</li>
  <li>Changed the lookup interface to accept endpoint and Domain as query string parameters to control the scope of a lookup.</li>
</ul>
<h1 id="rfc.references"><a href="#rfc.references">15.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">15.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-core-links-json">[I-D.ietf-core-links-json]</b>
      </td>
      <td class="top"><a>Li, K.</a>, <a>Rahman, A.</a> and <a>C. Bormann</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-links-json-05">Representing CoRE Formats in JSON and CBOR</a>", Internet-Draft draft-ietf-core-links-json-05, April 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3986">[RFC3986]</b>
      </td>
      <td class="top"><a>Berners-Lee, T.</a>, <a>Fielding, R.</a> and <a>L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, DOI 10.17487/RFC3986, January 2005.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5226">[RFC5226]</b>
      </td>
      <td class="top"><a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 5226, DOI 10.17487/RFC5226, May 2008.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5988">[RFC5988]</b>
      </td>
      <td class="top"><a>Nottingham, M.</a>, "<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>", RFC 5988, DOI 10.17487/RFC5988, October 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6335">[RFC6335]</b>
      </td>
      <td class="top"><a>Cotton, M.</a>, <a>Eggert, L.</a>, <a>Touch, J.</a>, <a>Westerlund, M.</a> and <a>S. Cheshire</a>, "<a href="http://tools.ietf.org/html/rfc6335">Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry</a>", BCP 165, RFC 6335, DOI 10.17487/RFC6335, August 2011.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6570">[RFC6570]</b>
      </td>
      <td class="top"><a>Gregorio, J.</a>, <a>Fielding, R.</a>, <a>Hadley, M.</a>, <a>Nottingham, M.</a> and <a>D. Orchard</a>, "<a href="http://tools.ietf.org/html/rfc6570">URI Template</a>", RFC 6570, DOI 10.17487/RFC6570, March 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6690">[RFC6690]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, "<a href="http://tools.ietf.org/html/rfc6690">Constrained RESTful Environments (CoRE) Link Format</a>", RFC 6690, DOI 10.17487/RFC6690, August 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6763">[RFC6763]</b>
      </td>
      <td class="top"><a>Cheshire, S.</a> and <a>M. Krochmal</a>, "<a href="http://tools.ietf.org/html/rfc6763">DNS-Based Service Discovery</a>", RFC 6763, DOI 10.17487/RFC6763, February 2013.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7396">[RFC7396]</b>
      </td>
      <td class="top"><a>Hoffman, P.</a> and <a>J. Snell</a>, "<a href="http://tools.ietf.org/html/rfc7396">JSON Merge Patch</a>", RFC 7396, DOI 10.17487/RFC7396, October 2014.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">15.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-core-interfaces">[I-D.ietf-core-interfaces]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Vial, M.</a> and <a>M. Koster</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-interfaces-04">Reusable Interface Definitions for Constrained RESTful Environments</a>", Internet-Draft draft-ietf-core-interfaces-04, October 2015.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC1034">[RFC1034]</b>
      </td>
      <td class="top"><a>Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>", STD 13, RFC 1034, DOI 10.17487/RFC1034, November 1987.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC1123">[RFC1123]</b>
      </td>
      <td class="top"><a>Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1123">Requirements for Internet Hosts - Application and Support</a>", STD 3, RFC 1123, DOI 10.17487/RFC1123, October 1989.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3629">[RFC3629]</b>
      </td>
      <td class="top"><a>Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, DOI 10.17487/RFC3629, November 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5198">[RFC5198]</b>
      </td>
      <td class="top"><a>Klensin, J.</a> and <a>M. Padlipsky</a>, "<a href="http://tools.ietf.org/html/rfc5198">Unicode Format for Network Interchange</a>", RFC 5198, DOI 10.17487/RFC5198, March 2008.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6775">[RFC6775]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Chakrabarti, S.</a>, <a>Nordmark, E.</a> and <a>C. Bormann</a>, "<a href="http://tools.ietf.org/html/rfc6775">Neighbor Discovery Optimization for IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs)</a>", RFC 6775, DOI 10.17487/RFC6775, November 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7230">[RFC7230]</b>
      </td>
      <td class="top"><a>Fielding, R.</a> and <a>J. Reschke</a>, "<a href="http://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>", RFC 7230, DOI 10.17487/RFC7230, June 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7252">[RFC7252]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Hartke, K.</a> and <a>C. Bormann</a>, "<a href="http://tools.ietf.org/html/rfc7252">The Constrained Application Protocol (CoAP)</a>", RFC 7252, DOI 10.17487/RFC7252, June 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7390">[RFC7390]</b>
      </td>
      <td class="top"><a>Rahman, A.</a> and <a>E. Dijk</a>, "<a href="http://tools.ietf.org/html/rfc7390">Group Communication for the Constrained Application Protocol (CoAP)</a>", RFC 7390, DOI 10.17487/RFC7390, October 2014.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Zach Shelby</span> 
	  <span class="n hidden">
		<span class="family-name">Shelby</span>
	  </span>
	</span>
	<span class="org vcardline">ARM</span>
	<span class="adr">
	  <span class="vcardline">150 Rose Orchard</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region"></span>
		<span class="code">95134</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1-408-203-9434</span>

<span class="vcardline">EMail: <a href="mailto:zach.shelby@arm.com">zach.shelby@arm.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Koster</span> 
	  <span class="n hidden">
		<span class="family-name">Koster</span>
	  </span>
	</span>
	<span class="org vcardline">SmartThings</span>
	<span class="adr">
	  <span class="vcardline">665 Clyde Avenue</span>

	  <span class="vcardline">
		<span class="locality">Mountain View</span>,  
		<span class="region"></span>
		<span class="code">94043</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1-707-502-5136</span>

<span class="vcardline">EMail: <a href="mailto:Michael.Koster@smartthings.com">Michael.Koster@smartthings.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Carsten Bormann</span> 
	  <span class="n hidden">
		<span class="family-name">Bormann</span>
	  </span>
	</span>
	<span class="org vcardline">Universitaet Bremen TZI</span>
	<span class="adr">
	  <span class="vcardline">Postfach 330440</span>

	  <span class="vcardline">
		<span class="locality">Bremen</span>,  
		<span class="region"></span>
		<span class="code">D-28359</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-421-218-63921</span>

<span class="vcardline">EMail: <a href="mailto:cabo@tzi.org">cabo@tzi.org</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Peter van der Stok</span> 
	  <span class="n hidden">
		<span class="family-name">van der Stok</span>
	  </span>
	</span>
	<span class="org vcardline">consultant</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">Phone: +31-492474673 (Netherlands), +33-966015248 (France)</span>

<span class="vcardline">EMail: <a href="mailto:consultancy@vanderstok.org">consultancy@vanderstok.org</a></span>

<span class="vcardline">URI: <a href="www.vanderstok.org">www.vanderstok.org</a></span>

  </address>
</div>

</body>
</html>
